# ç›®å½•çº¦å®š

## æ¦‚è¿°

æœ¬æ–‡æ¡£æè¿° CardMind OpenSpec æ–‡æ¡£çš„ç›®å½•ç»“æ„å’Œå‘½åçº¦å®šã€‚

**è¿ç§»æ—¥æœŸ**ï¼š2026-01-20
**ç»“æ„ç‰ˆæœ¬**ï¼š1.0.0ï¼ˆé¢†åŸŸé©±åŠ¨ï¼‰

---

## ç›®å½•ç»“æ„

```
openspec/specs/
â”œâ”€â”€ domain/            # é¢†åŸŸæ¨¡å‹å’Œä¸šåŠ¡é€»è¾‘
â”œâ”€â”€ api/               # å…¬å…± API å’Œ FFI æ¥å£
â”œâ”€â”€ features/          # é¢å‘ç”¨æˆ·çš„åŠŸèƒ½
â””â”€â”€ ui_system/         # è®¾è®¡ä»¤ç‰Œå’Œå…±äº« UI ç»„ä»¶
```

---

## é¡¶å±‚ç›®å½•

### ğŸ—ï¸ `domain/`

**ç›®çš„**ï¼šç³»ç»Ÿåšä»€ä¹ˆ

**åŒ…å«**ï¼šé¢†åŸŸæ¨¡å‹ã€æ ¸å¿ƒç±»å‹ã€ä¸šåŠ¡é€»è¾‘è§„æ ¼

**ç¤ºä¾‹æ–‡ä»¶**ï¼š
- `common_types.md` - å…±äº«ç±»å‹ï¼ˆUUIDã€æ—¶é—´æˆ³ï¼‰
- `pool_model.md` - å•æ± æ¶æ„
- `card_store.md` - å¡ç‰‡å­˜å‚¨é€»è¾‘
- `sync_protocol.md` - åŒæ­¥ç®—æ³•
- `device_config.md` - è®¾å¤‡é…ç½®

**å‘½å**ï¼š`snake_case.md`

---

### ğŸ”Œ `api/`

**ç›®çš„**ï¼šç»„ä»¶å¦‚ä½•é€šä¿¡

**åŒ…å«**ï¼šå…¬å…± APIã€FFI æ¥å£ã€å¤–éƒ¨å¥‘çº¦

**ç¤ºä¾‹æ–‡ä»¶**ï¼š
- `api_spec.md` - ä¸»è¦ Rust API è§„æ ¼

**å‘½å**ï¼š`snake_case.md`

---

### âœ¨ `features/`

**ç›®çš„**ï¼šç”¨æˆ·å¯ä»¥åšä»€ä¹ˆ

**åŒ…å«**ï¼šæŒ‰åŠŸèƒ½ç»„ç»‡çš„é¢å‘ç”¨æˆ·çš„åŠŸèƒ½

**ç»“æ„**ï¼š
```
features/
â”œâ”€â”€ card_editor/
â”‚   â”œâ”€â”€ logic.md          # Rust/åç«¯é€»è¾‘ï¼ˆå¯é€‰ï¼‰
â”‚   â”œâ”€â”€ ui_mobile.md      # Flutter ç§»åŠ¨ç«¯ UI
â”‚   â”œâ”€â”€ ui_desktop.md     # Flutter æ¡Œé¢ç«¯ UI
â”‚   â””â”€â”€ ui_shared.md      # å…±äº« UI é€»è¾‘ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ card_list/
â”‚   â””â”€â”€ ...
â””â”€â”€ ...
```

**å‘½åçº¦å®š**ï¼š
- åŠŸèƒ½ç›®å½•ï¼š`lowercase_with_underscores`ï¼ˆå°å†™ä¸‹åˆ’çº¿ï¼‰
- é€»è¾‘æ–‡ä»¶ï¼š`logic.md`ï¼ˆRust/åç«¯ï¼‰
- UI æ–‡ä»¶ï¼š`ui_mobile.md`ã€`ui_desktop.md`ã€`ui_shared.md`

**ç¤ºä¾‹åŠŸèƒ½**ï¼š
- `card_editor/` - å¡ç‰‡ç¼–è¾‘ç•Œé¢
- `card_list/` - å¡ç‰‡åˆ—è¡¨/ç½‘æ ¼è§†å›¾
- `search/` - æœç´¢åŠŸèƒ½
- `onboarding/` - é¦–æ¬¡ç”¨æˆ·ä½“éªŒ
- `sync_feedback/` - åŒæ­¥çŠ¶æ€ UI

**è§„åˆ™**ï¼š
- âœ… æŒ‰ç”¨æˆ·åŠŸèƒ½ç»„ç»‡ï¼Œè€ŒéæŒ‰æŠ€æœ¯æ ˆ
- âœ… ä½¿ç”¨æè¿°æ€§åç§°ï¼ˆcard_editorï¼Œè€Œé editorï¼‰
- âœ… å½“ UI ä¸åŒæ—¶æŒ‰å¹³å°æ‹†åˆ†ï¼ˆui_mobile.md vs ui_desktop.mdï¼‰
- âœ… å½“ UI åœ¨å„å¹³å°ç›¸åŒæ—¶ä½¿ç”¨ ui_shared.md
- âŒ ä¸è¦ä½¿ç”¨æŠ€æœ¯æ ˆå‰ç¼€ï¼ˆSP-FLT-MOB-001ï¼‰

---

### ğŸ¨ `ui_system/`

**ç›®çš„**ï¼šä¸€è‡´çš„ UI åŸºç¡€

**åŒ…å«**ï¼šè®¾è®¡ä»¤ç‰Œã€å¸ƒå±€ç³»ç»Ÿã€å…±äº«ç»„ä»¶

**ç¤ºä¾‹æ–‡ä»¶**ï¼š
- `design_tokens.md` - é¢œè‰²ã€æ’ç‰ˆã€é—´è·
- `responsive_layout.md` - å“åº”å¼å¸ƒå±€ç³»ç»Ÿ
- `shared_widgets.md` - å¯å¤ç”¨ UI ç»„ä»¶

**å‘½å**ï¼š`snake_case.md`

---

## æ–‡ä»¶å‘½åçº¦å®š

### å·¥ç¨‹æ–‡æ¡£
- **æ ¼å¼**ï¼š`snake_case.md`
- **è¯­è¨€**ï¼šä¸­æ–‡
- **ç¼–ç **ï¼šUTF-8
- **è¡Œå°¾**ï¼šUnix (LF)ï¼Œè€Œé Windows (CRLF)

### åŠŸèƒ½æ–‡ä»¶
- åç«¯é€»è¾‘ï¼š`logic.md`
- ç§»åŠ¨ç«¯ UIï¼š`ui_mobile.md`
- æ¡Œé¢ç«¯ UIï¼š`ui_desktop.md`
- å…±äº« UIï¼š`ui_shared.md`

### è§„æ ¼æ–‡ä»¶
- é¢†åŸŸè§„æ ¼ï¼šæè¿°æ€§åç§°ï¼ˆä¾‹å¦‚ï¼š`card_store.md`ã€`sync_protocol.md`ï¼‰
- æ–‡ä»¶åä¸­ä¸ä½¿ç”¨æŠ€æœ¯æ ˆå‰ç¼€

---

## ä»æ—§ç»“æ„è¿ç§»

### æ—§ç»“æ„ï¼ˆå·²åºŸå¼ƒï¼‰
```
openspec/specs/
â”œâ”€â”€ rust/           # âŒ å·²åºŸå¼ƒ â†’ å·²è¿ç§»åˆ° domain/ å’Œ api/
â””â”€â”€ flutter/        # âŒ å·²åºŸå¼ƒ â†’ å·²è¿ç§»åˆ° features/ å’Œ ui_system/
```

### è¿ç§»æ˜ å°„

| æ—§è·¯å¾„ | æ–°è·¯å¾„ | è¯´æ˜ |
|----------|----------|------|
| `rust/api_spec.md` | `api/api_spec.md` | API è§„æ ¼ |
| `rust/card_store_spec.md` | `domain/card_store.md` | å¡ç‰‡å­˜å‚¨ |
| `rust/sync_spec.md` | `domain/sync_protocol.md` | åŒæ­¥åè®® |
| `flutter/mobile/SP-FLT-MOB-002-card-editor.md` | `features/card_editor/ui_mobile.md` | å¡ç‰‡ç¼–è¾‘å™¨ |
| `flutter/desktop/SP-FLT-DSK-001-card-grid.md` | `features/card_list/ui_desktop.md` | å¡ç‰‡åˆ—è¡¨ |

---

## éªŒè¯

### ç›®å½•ç»“æ„
```bash
# éªŒè¯æ‰€æœ‰é¡¶å±‚ç›®å½•å­˜åœ¨
ls -d openspec/specs/{engineering,domain,api,features,ui_system,adr}

# ç»Ÿè®¡åŠŸèƒ½ç›®å½•æ•°é‡ï¼ˆåº”ä¸º 11ï¼‰
ls -d openspec/specs/features/*/ | wc -l
```

### æ–‡ä»¶è¿ç§»
```bash
# ç»Ÿè®¡æ–°ç»“æ„ä¸­çš„æ–‡ä»¶æ•°é‡
find openspec/specs/{engineering,domain,api,features,ui_system} -name "*.md" | wc -l

# éªŒè¯ features/ ä¸­æ²¡æœ‰æŠ€æœ¯æ ˆå‰ç¼€
grep -r "SP-FLT-" openspec/specs/features/
```

---

## æœ€ä½³å®è·µ

### âœ… åº”è¯¥åš
- æŒ‰ç”¨æˆ·åŠŸèƒ½ç»„ç»‡ï¼ˆfeatures/ï¼‰
- ä½¿ç”¨æè¿°æ€§çš„ã€ä»¥é¢†åŸŸä¸ºä¸­å¿ƒçš„åç§°
- ä»…åœ¨ UI ä¸åŒæ—¶æŒ‰å¹³å°æ‹†åˆ†
- ä¿æŒåç«¯é€»è¾‘ç‹¬ç«‹ï¼ˆlogic.mdï¼‰

### âŒ ä¸åº”è¯¥åš
- æŒ‰æŠ€æœ¯æ ˆç»„ç»‡ï¼ˆé¡¶å±‚ä¸ä½¿ç”¨ rust/ã€flutter/ï¼‰
- ä½¿ç”¨æŠ€æœ¯æ ˆå‰ç¼€ï¼ˆSP-FLT-MOB-001ï¼‰
- åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­æ··åˆå¹³å°ç‰¹å®šå’Œå…±äº« UI
- ä¸ºå†…éƒ¨å·¥å…·åˆ›å»ºåŠŸèƒ½ç›®å½•

---

## OpenSpec å˜æ›´å·¥ä½œæµçº¦å®š

### å˜æ›´ä¸­çš„ `specs/` ç›®å½•ä½¿ç”¨è§„èŒƒ

**é‡è¦**ï¼šOpenSpec å˜æ›´å½’æ¡£æ—¶ï¼Œä¼šå°†å˜æ›´ä¸­çš„ `openspec/specs/` ç›®å½•å†…å®¹åŒæ­¥åˆ°ä¸»è§„æ ¼ç›®å½•ã€‚å› æ­¤ï¼Œå˜æ›´ä¸­çš„ `specs/` ç›®å½•**å¿…é¡»åªåŒ…å«ä¸šåŠ¡è§„æ ¼æ–‡æ¡£**ã€‚

#### âœ… åº”è¯¥æ”¾åœ¨å˜æ›´çš„ `specs/` ç›®å½•

ä»¥ä¸‹ç±»å‹çš„æ–‡æ¡£åº”è¯¥æ”¾åœ¨å˜æ›´çš„ `specs/` ç›®å½•ä¸­ï¼ˆå½’æ¡£æ—¶ä¼šåŒæ­¥åˆ°ä¸»è§„æ ¼ï¼‰ï¼š

1. **é¢†åŸŸæ¨¡å‹** (`domain/`)
   - æ ¸å¿ƒä¸šåŠ¡æ¦‚å¿µå’Œæ•°æ®æ¨¡å‹
   - ä¸šåŠ¡è§„åˆ™å’Œçº¦æŸ
   - ç¤ºä¾‹ï¼š`domain/pool/model.md`ã€`domain/card/rules.md`

2. **åŠŸèƒ½è§„æ ¼** (`features/`)
   - é¢å‘ç”¨æˆ·çš„åŠŸèƒ½æè¿°
   - ç”¨æˆ·äº¤äº’æµç¨‹
   - ç¤ºä¾‹ï¼š`features/card_management/spec.md`

3. **UI è§„æ ¼** (`ui/`)
   - ç•Œé¢å¸ƒå±€å’Œäº¤äº’
   - å¹³å°ç‰¹å®šçš„ UI è¡Œä¸º
   - ç¤ºä¾‹ï¼š`ui/screens/mobile/home_screen.md`

4. **æ¶æ„è§„æ ¼** (`architecture/`)
   - æŠ€æœ¯å®ç°æ–¹æ¡ˆ
   - ç³»ç»Ÿæ¶æ„è®¾è®¡
   - ç¤ºä¾‹ï¼š`architecture/storage/card_store.md`

5. **API è§„æ ¼** (`api/`)
   - å…¬å…±æ¥å£å®šä¹‰
   - FFI æ¡¥æ¥è§„æ ¼
   - ç¤ºä¾‹ï¼š`api/api_spec.md`

#### âŒ ä¸åº”è¯¥æ”¾åœ¨å˜æ›´çš„ `specs/` ç›®å½•

ä»¥ä¸‹ç±»å‹çš„æ–‡æ¡£**ä¸åº”è¯¥**æ”¾åœ¨å˜æ›´çš„ `specs/` ç›®å½•ä¸­ï¼š

1. **å·¥ç¨‹æŒ‡å—æ–‡æ¡£**
   - ç¼–ç è§„èŒƒã€æµ‹è¯•æŒ‡å—
   - åº”æ”¾åœ¨ï¼šå˜æ›´çš„ `engineering/` ç›®å½•
   - å½’æ¡£åæ‰‹åŠ¨ç§»åŠ¨åˆ°ï¼š`openspec/engineering/`

2. **å·¥å…·å’Œè„šæœ¬æ–‡æ¡£**
   - éªŒè¯è„šæœ¬ã€æ£€æŸ¥å·¥å…·çš„è¯´æ˜
   - åº”æ”¾åœ¨ï¼šå˜æ›´çš„ `tools/` æˆ– `scripts/` ç›®å½•

3. **ä¸´æ—¶åˆ†ææ–‡æ¡£**
   - é—®é¢˜è°ƒæŸ¥ã€æŠ€æœ¯è°ƒç ”
   - åº”æ”¾åœ¨ï¼šå˜æ›´çš„ `analysis/` æˆ– `research/` ç›®å½•

4. **è¿ç§»å’Œé‡æ„æ–‡æ¡£**
   - è¿ç§»æ˜ å°„è¡¨ã€é‡æ„è®¡åˆ’
   - åº”æ”¾åœ¨ï¼šå˜æ›´çš„æ ¹ç›®å½•æˆ– `docs/` ç›®å½•

### å½’æ¡£å‰æ£€æŸ¥æ¸…å•

åœ¨æ‰§è¡Œ `openspec archive` ä¹‹å‰ï¼Œè¯·æ£€æŸ¥ï¼š

- [ ] å˜æ›´çš„ `specs/` ç›®å½•ä¸­åªåŒ…å«ä¸šåŠ¡è§„æ ¼æ–‡æ¡£
- [ ] æ‰€æœ‰å·¥ç¨‹æŒ‡å—æ–‡æ¡£å·²ç§»åˆ° `engineering/` ç›®å½•
- [ ] æ‰€æœ‰æ–‡æ¡£ç¬¦åˆåŒè¯­æ ¼å¼è§„èŒƒ
- [ ] æ‰€æœ‰æ–‡æ¡£åŒ…å«å¿…éœ€çš„å…ƒæ•°æ®å­—æ®µ
- [ ] æ–‡æ¡£è·¯å¾„ç¬¦åˆå››å±‚æ¶æ„ï¼ˆdomain/features/ui/architectureï¼‰

### å¸¸è§é”™è¯¯ç¤ºä¾‹

**âŒ é”™è¯¯ç¤ºä¾‹ 1ï¼šå·¥ç¨‹æŒ‡å—æ”¾åœ¨ specs/ ç›®å½•**
```
openspec/changes/my-change/
â””â”€â”€ specs/
    â””â”€â”€ bilingual-compliance/    # âŒ é”™è¯¯ï¼šå·¥ç¨‹æŒ‡å—
        â””â”€â”€ spec.md
```

**âœ… æ­£ç¡®åšæ³•**ï¼š
```
openspec/changes/my-change/
â””â”€â”€ engineering/                 # âœ… æ­£ç¡®ï¼šå·¥ç¨‹æŒ‡å—
    â””â”€â”€ bilingual_compliance_spec.md
```

**âŒ é”™è¯¯ç¤ºä¾‹ 2ï¼šè¿ç§»æ–‡æ¡£æ”¾åœ¨ specs/ ç›®å½•**
```
openspec/changes/my-change/
â””â”€â”€ specs/
    â””â”€â”€ migration_map.md         # âŒ é”™è¯¯ï¼šè¿ç§»æ–‡æ¡£
```

**âœ… æ­£ç¡®åšæ³•**ï¼š
```
openspec/changes/my-change/
â””â”€â”€ migration_map.md             # âœ… æ­£ç¡®ï¼šæ”¾åœ¨å˜æ›´æ ¹ç›®å½•
```

### éªŒè¯è„šæœ¬

å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éªŒè¯å˜æ›´ä¸­çš„æ–‡æ¡£åˆ†ç±»ï¼š

```bash
# æ£€æŸ¥ specs/ ç›®å½•ä¸­æ˜¯å¦æœ‰å·¥ç¨‹æ–‡æ¡£å…³é”®è¯
grep -r "å·¥ç¨‹æŒ‡å—\|ç¼–ç è§„èŒƒ\|æµ‹è¯•æŒ‡å—\|éªŒè¯è„šæœ¬" openspec/changes/*/specs/

# æ£€æŸ¥ specs/ ç›®å½•ç»“æ„æ˜¯å¦ç¬¦åˆå››å±‚æ¶æ„
ls -d openspec/changes/*/specs/{domain,features,ui,architecture}
```

### ç›¸å…³é—®é¢˜è®°å½•

- **é—®é¢˜æ¡ˆä¾‹**ï¼šå˜æ›´ `bilingual-spec-compliance` å½’æ¡£æ—¶ï¼Œå·¥ç¨‹æŒ‡å—æ–‡æ¡£ `specs/bilingual-compliance/spec.md` è¢«é”™è¯¯åŒæ­¥åˆ°ä¸»è§„æ ¼ç›®å½•ï¼ˆæäº¤ 38d86a4ï¼‰
- **è§£å†³æ–¹æ¡ˆ**ï¼šå°†æ–‡æ¡£è¿ç§»åˆ° `engineering/bilingual_compliance_spec.md`ï¼Œåˆ é™¤é”™è¯¯ç›®å½•
- **é¢„é˜²æªæ–½**ï¼šæœ¬ç« èŠ‚çš„çº¦å®šå’Œæ£€æŸ¥æ¸…å•

---

## å‚è€ƒ

- é…ç½®ï¼š`openspec/.openspec/config.json`
- è§„æ ¼ç¼–ç æŒ‡å—ï¼š`openspec/engineering/guide.md`
- ADR ç´¢å¼•ï¼š`docs/adr/`ï¼ˆæ¶æ„å†³ç­–è®°å½•ç°åœ¨ä½äº docs/ ç›®å½•ï¼‰
