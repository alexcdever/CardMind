# CardMind UI/UX 设计文档

## 1. 设计概述

### 1.1 设计理念

- **简洁明了**: 采用简约设计风格，减少视觉干扰，让用户专注于内容创建和管理
- **直观易用**: 遵循用户直觉，提供符合常规认知的交互模式
- **响应迅速**: 确保所有操作都有即时反馈，提升用户体验
- **一致统一**: 在不同设备和平台上保持一致的视觉和交互体验
- **安全可靠**: 通过视觉设计传达应用的安全性和可靠性

### 1.2 适用范围

本设计文档适用于CardMind应用的Web PWA版本、Electron桌面版本和Docker容器化版本，确保跨平台体验一致性。

## 2. 色彩系统

### 2.1 主色调

| 颜色 | 色值 | 用途 |
|------|------|------|
| 主色 | `#3b82f6` (蓝色) | 品牌标识、主要操作按钮、高亮状态 |
| 辅助色 | `#8b5cf6` (紫色) | 次要操作、特殊标记 |
| 成功色 | `#10b981` (绿色) | 成功状态、完成操作 |
| 警告色 | `#f59e0b` (橙色) | 警告提示、需要注意的信息 |
| 错误色 | `#ef4444` (红色) | 错误状态、删除操作 |

### 2.2 中性色

| 颜色 | 色值 | 用途 |
|------|------|------|
| 背景色 | `#f9fafb` (浅灰) | 页面主背景 |
| 卡片背景 | `#ffffff` (白色) | 卡片、弹窗背景 |
| 文本主色 | `#111827` (深灰) | 主要文本内容 |
| 文本次要色 | `#4b5563` (中灰) | 辅助说明文本 |
| 文本禁用色 | `#9ca3af` (浅灰) | 禁用状态文本 |
| 边框色 | `#e5e7eb` (极浅灰) | 元素边框、分割线 |

## 3. 排版系统

### 3.1 字体规范

- **主字体**: Inter (无衬线字体)
- **备选字体**: 系统默认无衬线字体
- **字体大小比例**: 12px, 14px, 16px, 18px, 20px, 24px, 32px
- **行高规范**: 正文1.5倍，标题1.2倍

### 3.2 文字层级

| 类型 | 字体大小 | 字重 | 颜色 | 用途 |
|------|----------|------|------|------|
| 大标题 | 24px-32px | 700 | `#111827` | 应用标题、页面大标题 |
| 中标题 | 18px-20px | 600 | `#111827` | 模块标题、区域标题 |
| 小标题 | 16px | 600 | `#111827` | 卡片标题、小组件标题 |
| 正文 | 14px-16px | 400 | `#111827` | 主要内容文本 |
| 辅助文字 | 12px-14px | 400 | `#4b5563` | 描述、提示、时间戳 |
| 按钮文字 | 14px | 500 | 根据背景色适配 | 按钮、操作链接 |

## 4. 布局架构

### 4.1 整体布局

采用移动端优先的响应式布局，包含以下核心区域：

```
┌─────────────────────────────────────────────────────────┐
│                        应用头部                          │
├─────────────────────────────────────────────────────────┤
│                        主内容区                          │
│  ┌─────────────────────────────────────────────────────┐│
│  │                      卡片列表                        ││
│  └─────────────────────────────────────────────────────┘│
├─────────────────────────────────────────────────────────┤
│                        底部导航                          │
└─────────────────────────────────────────────────────────┘
```

### 4.2 响应式断点设计

| 设备类型 | 屏幕宽度 | 布局调整 |
|----------|----------|----------|
| 移动端 | < 640px | 单列布局，底部导航栏固定 |
| 平板 | 640px - 1024px | 适当间距，底部导航栏固定 |
| 桌面端 | > 1024px | 优化边距，内容居中，宽度限制在1200px |

## 5. 核心页面与组件设计

### 5.1 主页 (卡片列表页)

**布局结构**: 
- 卡片列表区域（垂直滚动）
- 悬浮添加按钮
- 底部导航栏

**核心组件**: 
- 应用头部（标题）
- 卡片列表容器
- 卡片项组件
- 悬浮添加按钮
- 底部导航

**交互设计**: 
- 下拉刷新卡片列表
- 点击卡片项查看详情
- 卡片右侧有编辑按钮和删除按钮
- 点击悬浮按钮添加新卡片

### 5.2 卡片详情页

**布局结构**: 
- 模态弹窗形式展现
- 弹窗内容区域（标题、内容、元信息）
- 弹窗底部操作按钮
- 弹窗外部遮罩层

**交互设计**: 
- 点击遮罩层关闭弹窗
- 点击关闭按钮关闭弹窗
- 支持复制内容功能

### 5.3 卡片编辑页

**布局结构**: 
- 模态弹窗形式展现
- 弹窗内容区域（标题输入框、内容输入框）
- 字数统计提示
- 弹窗底部操作按钮（取消/保存）
- 弹窗外部遮罩层

**交互设计**: 
- 实时字数统计和验证
- 内容为空时保存按钮禁用
- 超出字数限制时保存按钮禁用
- 点击取消按钮显示二次确认
- 保存成功后自动关闭弹窗并刷新列表

### 5.4 网络认证界面

**布局结构**: 
- 全屏居中布局
- 页面标题和说明文本
- 网络ID输入区域
- 操作按钮区域
- 跳过选项

**交互设计**: 
- 输入框支持粘贴网络ID
- 点击加入按钮验证网络ID并加入
- 点击生成网络ID切换到生成界面
- 点击跳过按钮直接进入应用主页

### 5.5 网络设置界面

**布局结构**: 
- 设置页面中的独立区块
- 当前网络状态显示区域
- 网络操作按钮区域
- 设备信息显示区域
- 在线设备列表区域
- 同步状态显示区域

**交互设计**: 
- 点击生成新网络ID按钮创建新网络
- 点击加入网络按钮弹出输入框
- 显示当前网络连接状态
- 实时显示在线设备列表
- 显示设备总数统计
- 当前设备用蓝色标签特殊标识
- 显示最后同步时间戳

## 6. 交互流程设计

### 6.1 卡片创建流程

```
用户点击添加按钮 → 弹出编辑窗口 → 用户输入标题和内容 → 点击保存按钮 → 验证内容 → 保存成功 → 关闭窗口 → 刷新列表 → 显示成功提示
                                                                          ↓
                                                                    验证失败 → 显示错误提示 → 用户修改内容
```

### 6.2 卡片查看流程

```
用户点击卡片项 → 弹出详情窗口 → 显示卡片完整内容 → 用户阅读 → 点击关闭按钮或遮罩层 → 关闭窗口
```

### 6.3 卡片编辑流程

```
用户点击编辑按钮 → 弹出编辑窗口（填充当前卡片内容） → 用户修改内容 → 点击保存按钮 → 验证内容 → 保存成功 → 关闭窗口 → 刷新列表 → 显示成功提示
                                                                          ↓
                                                                    验证失败 → 显示错误提示 → 用户修改内容
```

### 6.4 卡片删除流程

```
用户点击删除按钮 → 弹出确认对话框 → 用户确认删除 → 执行删除 → 刷新列表 → 显示成功提示
                                           ↓
                                       用户取消 → 关闭对话框
```

### 6.5 数据同步流程

```
应用启动 → 初始化Yjs文档 → 加载本地IndexedDB数据 → 初始化WebRTC连接 → 检测网络状态
                                                                      ↓
                                                              网络连接正常 → Yjs自动建立P2P连接 → 开始自动同步数据
                                                                                                  ↓
                                                                                      同步完成 → 显示同步状态图标（绿色）
                                                                      ↓
                                                              网络连接异常 → 进入离线模式 → 使用本地数据 → 自动缓存操作
                                                                                                     ↓
                                                                                             恢复网络 → Yjs自动重连 → 自动同步缓存数据 → 同步完成
```

## 7. 状态与反馈设计

### 7.1 加载状态

- **应用启动加载**: 显示启动屏或加载动画
- **内容加载**: 显示骨架屏或加载指示器
- **操作加载**: 按钮显示加载状态，禁用操作

### 7.2 成功状态

- **操作成功**: 显示顶部通知条或右下角提示框
- **同步成功**: 显示同步完成图标

### 7.3 错误状态

- **操作失败**: 显示错误提示信息
- **验证失败**: 输入框下方显示错误提示文本
- **网络错误**: 显示网络连接失败图标和重试按钮

### 7.4 同步状态

- **在线状态**: 显示在线图标，颜色为绿色
- **同步中**: 显示同步动画，颜色为蓝色
- **离线状态**: 显示离线图标，颜色为灰色
- **冲突状态**: 显示冲突提示，提供解决方案

## 8. 辅助功能

### 8.1 无障碍设计

- 支持键盘导航和快捷键操作
- 提供适当的ARIA标签和属性
- 确保文本与背景的对比度符合WCAG标准
- 支持屏幕阅读器

### 8.2 键盘快捷键

- `Ctrl/Cmd + N`: 新建卡片
- `Esc`: 关闭弹窗
- `Enter`: 确认操作
- `Delete`: 删除选中的卡片