# CardMind UI/UX 设计文档

## 1. 设计概述

本文档旨在详细描述CardMind应用的用户界面设计和用户交互体验，为开发团队提供清晰的设计依据，确保应用在视觉和交互上保持一致性和高品质。

### 1.1 设计理念

- **简洁明了**: 采用简约设计风格，减少视觉干扰，让用户专注于内容创建和管理
- **直观易用**: 遵循用户直觉，提供符合常规认知的交互模式
- **响应迅速**: 确保所有操作都有即时反馈，提升用户体验
- **一致统一**: 在不同设备和平台上保持一致的视觉和交互体验
- **安全可靠**: 通过视觉设计传达应用的安全性和可靠性
- **富文本支持**: 提供直观的富文本编辑体验，满足多样化内容表达需求

### 1.2 适用范围

本设计文档适用于CardMind应用的Web PWA版本、Electron桌面版本和Docker容器化版本，确保跨平台体验一致性。

## 2. 色彩系统

### 2.1 主色调

| 颜色 | 色值 | 用途 | 示例 |
|------|------|------|------|
| 主色 | `#3b82f6` (蓝色) | 品牌标识、主要操作按钮、高亮状态 | 确认按钮、活动状态 |
| 辅助色 | `#8b5cf6` (紫色) | 次要操作、特殊标记 | 特殊操作 |
| 成功色 | `#10b981` (绿色) | 成功状态、完成操作 | 保存成功提示 |
| 警告色 | `#f59e0b` (橙色) | 警告提示、需要注意的信息 | 警告通知 |
| 错误色 | `#ef4444` (红色) | 错误状态、删除操作 | 删除按钮、错误提示 |

### 2.2 中性色

| 颜色 | 色值 | 用途 | 示例 |
|------|------|------|------|
| 背景色 | `#f9fafb` (浅灰) | 页面主背景 | 应用背景 |
| 卡片背景 | `#ffffff` (白色) | 卡片、弹窗背景 | 卡片组件 |
| 文本主色 | `#111827` (深灰) | 主要文本内容 | 标题、正文 |
| 文本次要色 | `#4b5563` (中灰) | 辅助说明文本 | 时间戳、描述 |
| 文本禁用色 | `#9ca3af` (浅灰) | 禁用状态文本 | 禁用按钮文本 |
| 边框色 | `#e5e7eb` (极浅灰) | 元素边框、分割线 | 卡片边框 |

## 3. 排版系统

### 3.1 字体规范

- **主字体**: Inter (无衬线字体)
- **备选字体**: 系统默认无衬线字体
- **字体大小比例**: 12px, 14px, 16px, 18px, 20px, 24px, 32px
- **行高规范**: 正文1.5倍，标题1.2倍

### 3.2 文字层级

| 类型 | 字体大小 | 字重 | 颜色 | 行高 | 用途 |
|------|----------|------|------|------|------|
| 大标题 | 24px-32px | 700 | `#111827` | 1.2 | 应用标题、页面大标题 |
| 中标题 | 18px-20px | 600 | `#111827` | 1.2 | 模块标题、区域标题 |
| 小标题 | 16px | 600 | `#111827` | 1.2 | 卡片标题、小组件标题 |
| 正文 | 14px-16px | 400 | `#111827` | 1.5 | 主要内容文本 |
| 辅助文字 | 12px-14px | 400 | `#4b5563` | 1.5 | 描述、提示、时间戳 |
| 按钮文字 | 14px | 500 | 根据背景色适配 | 1.2 | 按钮、操作链接 |

## 4. 布局架构

### 4.1 整体布局

采用移动端优先的响应式布局，包含以下核心区域：

```
┌─────────────────────────────────────────────────────────┐
│                        应用头部                          │
├─────────────────────────────────────────────────────────┤
│                        主内容区                          │
│  ┌─────────────────────────────────────────────────────┐│
│  │                      卡片列表                        ││
│  └─────────────────────────────────────────────────────┘│
├─────────────────────────────────────────────────────────┤
│                        底部导航                          │
└─────────────────────────────────────────────────────────┘
```

### 4.2 响应式断点设计

| 设备类型 | 屏幕宽度 | 布局调整 |
|----------|----------|----------|
| 移动端 | < 640px | 单列布局，底部导航栏固定 |
| 平板 | 640px - 1024px | 适当间距，底部导航栏固定 |
| 桌面端 | > 1024px | 优化边距，内容居中，宽度限制在1200px |

## 5. 核心页面与组件设计

### 5.1 主页 (卡片列表页)

**布局结构**: 
- 卡片列表区域（垂直滚动）
- 悬浮添加按钮
- 底部导航栏

**核心组件**: 
- 应用头部（标题）
- 卡片列表容器
- 卡片项组件
- 悬浮添加按钮
- 底部导航

**交互设计**: 
- 下拉刷新卡片列表
- 点击卡片项查看详情
- 卡片右侧有编辑按钮和删除按钮
  - 点击编辑按钮进入编辑页面
  - 点击删除按钮显示确认对话框
- 点击悬浮按钮添加新卡片

### 5.2 卡片详情页

**布局结构**: 
- 模态弹窗形式展现
- 弹窗内容区域（标题、内容、元信息）
- 弹窗底部操作按钮
- 弹窗外部遮罩层

**核心组件**: 
- 详情模态框
- 标题显示区域
- 内容显示区域
- 创建/修改时间显示
- 关闭按钮

**交互设计**: 
- 点击遮罩层关闭弹窗
- 点击关闭按钮关闭弹窗
- 支持复制内容功能

### 5.3 卡片编辑页

**布局结构**: 
- 模态弹窗形式展现
- 弹窗内容区域（标题输入框、内容输入框）
- 字数统计提示
- 弹窗底部操作按钮（取消/保存）
- 弹窗外部遮罩层

**核心组件**: 
- 编辑模态框
- 标题输入框
- 富文本内容编辑器
- 字数统计组件
- 操作按钮组

**交互设计**: 
- 实时字数统计和验证
- 内容为空时保存按钮禁用
- 超出字数限制时保存按钮禁用
- 点击取消按钮显示二次确认
- 保存成功后自动关闭弹窗并刷新列表

### 5.4 确认对话框

**布局结构**: 
- 居中模态弹窗
- 提示图标和文本
- 操作按钮（取消/确认）

**核心组件**: 
- 确认对话框
- 提示图标
- 提示文本
- 操作按钮组

**交互设计**: 
- 点击确认执行操作
- 点击取消或遮罩层关闭对话框

### 5.5 网络认证界面

**布局结构**: 
- 全屏居中布局
- 页面标题和说明文本
- 网络ID输入区域
- 操作按钮区域
- 跳过选项

**核心组件**: 
- 页面标题
- 输入说明文本
- 网络ID输入框（带复制粘贴功能）
- 加入网络按钮
- 生成网络ID切换按钮
- 跳过按钮

**交互设计**: 
- 输入框支持粘贴网络ID
- 点击加入按钮验证网络ID并加入
- 点击生成网络ID切换到生成界面
- 点击跳过按钮直接进入应用主页
- 输入验证失败时显示错误提示
- 加入成功后自动跳转至主页

### 5.6 网络设置界面

**布局结构**: 
- 设置页面中的独立区块
- 当前网络状态显示区域
- 网络操作按钮区域
- 设备信息显示区域
- 在线设备列表区域
- 同步状态显示区域

**核心组件**: 
- 网络设置标题
- 连接状态指示器（带颜色标识）
- 当前连接网络ID显示（带复制按钮）
- 最后同步时间显示
- 在线设备列表（带设备图标、昵称、ID）
- 设备数量统计显示
- 当前设备特殊标识（蓝色标签）
- 生成新网络ID按钮
- 输入网络ID加入按钮
- 设备昵称显示和编辑组件
- 设备ID显示（只读）

**交互设计**: 
- 点击生成新网络ID按钮创建新网络
- 点击加入网络按钮弹出输入框
- 显示当前网络连接状态（未连接、同步中、已连接）
- 实时显示在线设备列表，每5秒自动更新
- 显示设备总数统计（包括当前设备）
- 当前设备用蓝色标签特殊标识
- 显示最后同步时间戳
- 支持编辑和保存设备昵称
- 提供复制当前网络ID的功能
- 连接状态通过颜色标识（绿色=在线，蓝色=同步中，灰色=离线，红色=错误）

**状态指示颜色规范**:
- 成功/在线: 绿色 (`#10b981`)
- 同步中: 蓝色 (`#3b82f6`)
- 离线/错误: 灰色 (`#9ca3af`) 或红色 (`#ef4444`)
- 处理中: 橙色 (`#f59e0b`)

**设备图标规范**:
- 移动设备: 手机图标
- 桌面设备: 电脑图标  
- 默认设备: 用户图标
- 图标大小: 24px
- 当前设备头像使用蓝色主题

**在线设备列表项**:
- 设备图标（左侧）
- 设备昵称（主标题）
- 设备ID简写（描述文本，显示前8位字符）
- 当前设备标签（蓝色小标签，仅当前设备显示）
- 列表项高度: 56px
- 边框样式: 1px边框，圆角4px

## 6. 交互流程设计

### 6.1 卡片创建流程

```
用户点击添加按钮 → 弹出编辑窗口 → 用户输入标题和内容 → 点击保存按钮 → 验证内容 → 保存成功 → 关闭窗口 → 刷新列表 → 显示成功提示
                                                                          ↓
                                                                    验证失败 → 显示错误提示 → 用户修改内容
```

### 6.2 卡片查看流程

```
用户点击卡片项 → 弹出详情窗口 → 显示卡片完整内容 → 用户阅读 → 点击关闭按钮或遮罩层 → 关闭窗口
```

### 6.3 卡片编辑流程

```
用户点击编辑按钮 → 弹出编辑窗口（填充当前卡片内容） → 用户修改内容 → 点击保存按钮 → 验证内容 → 保存成功 → 关闭窗口 → 刷新列表 → 显示成功提示
                                                                          ↓
                                                                    验证失败 → 显示错误提示 → 用户修改内容
```

### 6.4 卡片删除流程

```
用户点击删除按钮 → 弹出确认对话框 → 用户确认删除 → 执行删除（删除后无法撤销） → 刷新列表 → 显示成功提示
                                           ↓
                                       用户取消 → 关闭对话框
```

### 6.5 数据同步流程（基于Yjs CRDT）

```
应用启动 → 初始化Yjs文档 → 加载本地IndexedDB数据 → 初始化WebRTC连接 → 检测网络状态
                                                                      ↓
                                                              网络连接正常 → Yjs自动建立P2P连接 → 开始自动同步数据
                                                                                                  ↓
                                                                                      同步完成 → 显示同步状态图标（绿色）
                                                                      ↓
                                                              网络连接异常 → 进入离线模式 → 使用本地数据 → 自动缓存操作
                                                                                                     ↓
                                                                                             恢复网络 → Yjs自动重连 → 自动同步缓存数据 → 同步完成

数据操作流程（创建/编辑/删除）：
用户执行操作 → 同时更新本地IndexedDB和Yjs文档 → Yjs自动通过P2P网络同步到其他设备 → 其他设备接收更新 → 自动应用变更 → 自动刷新界面
```

### 6.6 网络认证流程

```
首次启动应用 → 显示网络认证界面 → 用户输入Access Code → 点击加入按钮 → 验证Access Code → 验证成功 → 加入网络 → 进入主页
                    ↓                                        ↓
               点击跳过按钮                           验证失败 → 显示错误提示 → 用户重新输入
                    ↓
               进入离线模式 → 使用本地数据
                    ↓
      点击生成Access Code → 系统生成唯一Access Code → 自动加入新网络 → 进入主页
```

### 6.7 网络设置流程

```
进入设置页面 → 进入网络设置区域
                    ↓
        ┌────────────┼────────────┐
        ↓            ↓            ↓
点击生成Access Code  点击加入网络   点击编辑设备昵称
        ↓            ↓            ↓
生成Access Code →     弹出输入框 →  弹出编辑框 →
自动加入新网络      输入Access Code    输入新昵称
        ↓            ↓            ↓
    显示成功提示   点击加入按钮    点击保存按钮
                               ↓
                          保存成功 → 显示成功提示
```
用户进入网络设置 → 系统获取连接状态 → 显示连接状态指示器
                    ↓
            获取在线设备列表 → 渲染设备列表 → 每5秒自动更新
                    ↓
            获取同步时间 → 显示最后同步时间 → 实时更新状态
```

**在线设备列表交互**:
- 设备列表实时更新，显示所有在线设备
- 当前设备用蓝色标签标识
- 设备图标根据设备类型显示（手机/电脑/用户）
- 设备ID显示前8位字符，超出部分用省略号
- 鼠标悬停显示完整设备ID
- 设备列表支持滚动，最大高度400px

## 7. 状态与反馈设计

### 7.1 加载状态

- **应用启动加载**: 显示启动屏或加载动画
- **内容加载**: 显示骨架屏或加载指示器
- **操作加载**: 按钮显示加载状态，禁用操作

### 7.2 成功状态

- **操作成功**: 显示顶部通知条或右下角提示框
- **同步成功**: 显示同步完成图标

### 7.3 错误状态

- **操作失败**: 显示错误提示信息
- **验证失败**: 输入框下方显示错误提示文本
- **网络错误**: 显示网络连接失败图标和重试按钮

### 7.4 同步状态

- **在线状态**: 显示在线图标，颜色为绿色
- **同步中**: 显示同步动画，颜色为蓝色
- **离线状态**: 显示离线图标，颜色为灰色
- **冲突状态**: 显示冲突提示，提供解决方案

## 8. 特殊场景处理

### 8.1 空状态

- **空卡片列表**: 显示友好的空状态提示，引导用户添加第一张卡片
  - 文案："当前卡片列表为空，请添加卡片"
  - 配图：简洁的插图或图标
  - 操作：提供"添加卡片"按钮

### 8.2 离线模式

- **离线提示**: 显示离线状态图标和提示文本
- **功能限制**: 灰显需要网络的功能按钮
- **数据存储**: 自动缓存操作，待恢复网络后同步

### 8.3 数据加密

- **加密状态提示**: 在设置页面显示加密状态
- **密码输入**: 首次使用或重新登录时显示密码输入界面
- **安全提示**: 提供密码强度提示和安全建议

### 8.4 网络认证特殊场景

- **Access Code无效**: 输入无效Access Code时显示明确错误提示，提供重试选项
- **网络连接失败**: 加入网络失败时显示连接错误，提供重试和跳过选项
- **网络切换**: 切换网络时显示确认对话框，提示用户数据可能会同步到新网络
- **设备昵称冲突**: 检测到设备昵称重复时，提示用户修改昵称并自动添加后缀避免冲突
- **Access Code复制**: 生成Access Code后自动复制到剪贴板并显示提示

## 9. 辅助功能

### 9.1 无障碍设计

- 支持键盘导航和快捷键操作
- 提供适当的ARIA标签和属性
- 确保文本与背景的对比度符合WCAG标准
- 支持屏幕阅读器

### 9.2 键盘快捷键

- `Ctrl/Cmd + N`: 新建卡片
- `Esc`: 关闭弹窗
- `Enter`: 确认操作
- `Delete`: 删除选中的卡片

## 10. 设计规范与组件库

### 10.1 Ant Design组件使用规范

- 遵循Ant Design 5.x的设计规范
- 统一使用预定义的颜色变量
- 保持组件大小和间距的一致性
- 遵循组件使用的最佳实践

### 10.2 自定义组件规范

- 所有自定义组件需提供TypeScript类型定义
- 组件需支持响应式设计
- 组件需考虑状态管理和生命周期
- 组件需添加适当的注释和文档

## 11. 交付物

- UI设计文档（本文档）
- 交互流程图
- 关键页面原型图
- 组件库使用指南

## 12. 版本控制

| 版本 | 修改内容 | 作者 |
|------|----------|------|
| 1.2 | 术语统一：统一使用"Access Code"术语，避免"访问码"混用。Access Code是包含网络ID和连接信息的加入凭证，用于设备间网络加入。修正所有UI文本、错误提示和注释中的术语使用 | 设计团队 |
| 1.1 | 更新网络设置界面设计：添加在线设备列表区域、同步状态显示区域、连接状态指示器、设备图标规范、在线设备列表项设计规范，以及网络信息显示流程和在线设备列表交互说明 | 设计团队 |
| 1.0 | 初始版本 | 设计团队 |

---

通过本UI/UX设计文档，我们确立了CardMind应用的视觉风格和交互体验规范，确保开发团队能够按照一致的标准实现应用功能，为用户提供直观、高效、愉悦的使用体验。