# CardMind UI 交互治理设计（单人探索版，2026-02-27）

## 1. 目标与边界
- 目标：为 CardMind 建立可持续迭代的 UI 交互规范，解决“无规范、不完整、无验收标准”问题。
- 范围：全链路一次覆盖，包含 `S1 引导分流`、`S2 卡片管理`、`S3 池管理`、`S4 设置`、`S5 全局同步异常`。
- 验收策略：采用双轨制（研发可执行 + 产品体验），两轨同时达标才视为完成。
- 项目形态：单人探索 AI 编程能力，无 KPI、无固定时间规划。

## 2. 规范架构（三层模型）

### 2.1 L1 交互原则层
- 统一约束：离线优先、可恢复错误、可观测反馈、跨端语义一致。
- 跨端规则：移动端与桌面端仅触发方式差异（触摸/键鼠），业务语义与验收结果一致。
- 禁止项：空交互提交（如 `onPressed: () {}`、`onTap: () {}`）与无说明禁用交互（如 `onPressed: null`）。

### 2.2 L2 页面场景层
- 使用统一场景模板描述每个场景，字段固定为：`入口`、`前置条件`、`主流程`、`异常分支`、`退出条件`、`可观测结果`。
- 任何场景缺失 `异常分支` 或 `可观测结果`，判定为规范不完整，不允许进入开发。

### 2.3 L3 双轨验收层
- 研发轨：每个用户可触发入口至少 1 条自动化测试映射，且断言行为结果。
- 体验轨：每个关键任务必须有可量化阈值（步骤数、反馈时延、失败恢复、文案可理解）。
- 发布门禁：研发轨与体验轨均达标才允许合并/发布。

## 3. 场景清单与最小完成定义

### S1 引导分流
- 定义首次启动分流：先本地使用 / 创建或加入池。
- 要求不阻断本地可用态，用户可直接进入卡片主流程。

### S2 卡片管理
- 覆盖卡片增删改查与检索相关交互。
- 强制包含编辑保存反馈、离开保护、失败可重试路径。

### S3 池管理
- 覆盖创建池、加入池、审批、退出池。
- 加入失败需有错误映射与下一步动作，不允许仅暴露技术错误码。

### S4 设置
- 覆盖设置项配置与基础信息展示。
- 保证从设置页可一步回到主任务路径（卡片管理），并保持池相关入口可达。

### S5 全局同步异常
- 覆盖同步异常提示分级（弱提示/高亮提示）与可操作入口。
- 原则是“异常不阻断本地编辑”，仅影响同步反馈与后续处理路径。

## 4. 双轨验收标准（量化）

### 4.1 研发轨（自动化）
- `入口覆盖`：按钮、菜单、列表项、快捷键、手势均需至少 1 条自动化用例。
- `结果断言`：必须断言跳转、状态文本、列表变化、对话框、错误反馈等可观察结果。
- `路径完整`：每个场景至少 1 条成功路径 + 1 条失败路径。
- `池管理附加`：加入池至少覆盖 1 条成功 + 1 条错误码失败路径。

### 4.2 体验轨（可度量）
- `步骤数`：关键任务步骤数需在定义阈值内（按任务单独设定）。
- `反馈时延`：触发动作后在阈值内展示处理中/成功/失败反馈。
- `错误恢复`：失败必须给出下一步动作（重试、返回、取消、排查入口）。
- `文案可理解`：错误文案至少包含“发生了什么 + 可以做什么”。

## 5. 交付物与门禁
- `交互规范`：记录 L1/L2 内容与场景条目。
- `验收矩阵`：同一张表中维护研发轨映射与体验轨阈值。
- `发布门禁清单`：以“未达标不可合并/不可发布”为硬门禁。
- 变更规则：新增或修改交互必须同步更新规范与矩阵，否则视为需求未完成。

## 6. 单人探索执行模式（无时间规划）
- 采用最小闭环迭代：选择 1 个场景 -> 补规范 -> 补验收 -> 跑通验证。
- 每次迭代仅以“是否通过双轨门禁”判断完成，不引入排期 KPI。
- 文档目标：保证实验可复现、决策可追踪、结论可沉淀。

## 7. 不做项
- 不建立独立流程排期与里程碑体系。
- 不为单人项目引入团队级角色拆分与流程仪式。
- 不在本版引入多池并行与高级权限体系。
