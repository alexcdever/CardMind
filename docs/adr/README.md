# 架构决策记录 (ADR)

本目录包含 CardMind 项目的架构决策记录（Architecture Decision Records）。

## 什么是 ADR？

ADR 记录了项目中重要的架构决策，包括：
- **为什么**做出这个决策（背景和问题）
- **决定了什么**（具体决策内容）
- **考虑过哪些替代方案**（以及为何拒绝）
- **决策的影响**（优势和缺点）

## ADR 的特点

- **不可变性**：ADR 一旦创建就不应修改，只能添加新的 ADR 来更新或推翻旧决策
- **历史记录**：记录决策的时间点和决策者
- **决策导向**：关注"为什么"而非"是什么"
- **纯中文**：面向人类阅读，使用中文叙述

## 当前 ADR 列表

| 编号 | 标题 | 日期 | 状态 |
|------|------|------|------|
| [0001](./0001-单池所有权模型.md) | 单池所有权模型 | 2026-01-09 | 已接受 |
| [0002](./0002-双层架构.md) | 双层架构 | 2024-12-31 | 已接受 |
| [0003](./0003-技术约束.md) | 技术约束 | 2024-12-31 | 已接受 |
| [0004](./0004-UI设计系统.md) | UI 设计系统 | 2024-12-31 | 已接受 |
| [0005](./0005-日志系统.md) | 日志系统 | 2024-12-31 | 已接受 |

## 何时创建 ADR？

当你需要做出以下类型的决策时，应该创建 ADR：

- 选择核心技术栈（如 CRDT 引擎、数据库）
- 定义架构模式（如双层架构、单池模型）
- 确定设计系统（如颜色方案、字体选择）
- 制定技术约束（如 ID 格式、密码安全方案）

## 如何创建 ADR？

1. 使用编号格式：`NNNN-标题.md`（如 `0006-新决策.md`）
2. 包含以下部分：
   - 状态、日期、决策者
   - 背景（为什么需要做决策）
   - 决策（具体决定了什么）
   - 考虑过的其他方案
   - 影响（优势和缺点）
3. 使用纯中文，叙述清晰易懂
4. 一旦创建，不要修改（除非修正明显错误）

## ADR vs 规格文档

| 维度 | ADR | 规格文档 (openspec/specs/) |
|------|-----|---------------------------|
| 关注点 | 为什么（Why） | 是什么、怎么做（What & How） |
| 可变性 | 不可变（历史记录） | 可变（反映当前状态） |
| 内容 | 决策背景、理由、权衡 | API 定义、行为规范、测试用例 |
| 位置 | `docs/adr/` | `openspec/specs/` |
| 语言 | 纯中文 | 双语（英文+中文） |

## 相关文档

- [规格文档索引](../../openspec/specs/README.md)
- [系统设计](../architecture/system_design.md)
- [产品愿景](../requirements/product_vision.md)

---

**最后更新**：2026-01-23
