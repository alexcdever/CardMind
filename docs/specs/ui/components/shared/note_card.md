# NoteCard 组件规格

## 概述

本规格定义 NoteCard 组件需求，该组件显示卡片内容并根据平台（桌面端 vs 移动端）调整编辑行为。

---

## 需求：显示卡片内容并支持平台特定编辑

系统应提供卡片显示组件，根据平台调整编辑行为。

### 场景：桌面端内联编辑

- **前置条件**: 用户在桌面平台上
- **操作**: 用户点击卡片
- **预期结果**: 卡片应在组件内切换到内联编辑模式

### 场景：移动端点击打开全屏编辑器

- **前置条件**: 用户在移动平台上
- **操作**: 用户点击卡片
- **预期结果**: 系统应触发 onTap 回调以打开全屏编辑器

### 场景：实时内容更新

- **前置条件**: 用户正在编辑卡片
- **操作**: 用户修改卡片标题或内容
- **预期结果**: 系统应使用修改后的卡片调用 onUpdate 回调

---

## 需求：显示协作指示器

系统应在卡片被其他节点编辑时显示可视化指示器。

### 场景：显示最后编辑节点

- **前置条件**: 卡片存在于池中
- **操作**: 卡片最后被与当前节点不同的节点修改
- **预期结果**: 系统应显示节点昵称和修改时间
- **并且**: 若未找到节点昵称，则显示截断后的 peer id

### 场景：高亮显示当前节点的编辑

- **前置条件**: 卡片存在于池中
- **操作**: 查看由当前节点最后修改的卡片
- **预期结果**: 系统应使用独特的样式表示本地所有权

---

## 需求：支持卡片删除

系统应提供卡片删除操作。

### 场景：删除卡片

- **前置条件**: 用户有权限删除卡片
- **操作**: 用户触发删除操作
- **预期结果**: 系统应使用卡片 ID 调用 onDelete 回调

---

## 测试覆盖

**测试文件**: `test/feature/widgets/note_card_feature_test.dart`

**组件测试**:
- `it_should_switch_to_inline_editing_on_desktop()` - 验证桌面编辑行为
- `it_should_open_fullscreen_editor_on_mobile()` - 验证移动端编辑行为
- `it_should_show_collaboration_indicators()` - 验证协作功能
- `it_should_delete_card()` - 验证删除

**验收标准**:
- [ ] 所有功能测试（Widget）通过
- [ ] 已在桌面端和移动端验证平台特定行为
- [ ] 代码审查通过
- [ ] 文档已更新
