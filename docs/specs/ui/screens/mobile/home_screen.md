# 移动端主屏幕规格

## 概述

本规格定义移动端主屏幕，显示用户卡片集合并提供针对移动设备优化的搜索、过滤和管理功能。

**移动端特定模式**:
- 单列垂直列表布局
- 浮动操作按钮快速创建
- 滑动手势提供快速操作
- 下拉刷新重新加载列表

---

## 需求：显示带有过滤和搜索的卡片列表

系统应提供显示所有用户卡片的主屏幕，并提供搜索和过滤功能。

### 场景：显示卡片列表

- **前置条件**: 用户打开应用
- **操作**: 主屏幕加载
- **预期结果**: 系统应以垂直列表布局显示所有卡片
- **并且**: 显示卡片标题、预览文本和元数据

### 场景：打开搜索覆盖层

- **前置条件**: 卡片列表已显示
- **操作**: 用户点击应用栏中的搜索图标
- **预期结果**: 系统应打开搜索覆盖层
- **并且**: 搜索输入框获得焦点
- **并且**: 键盘弹出

### 场景：输入搜索条件

- **前置条件**: 搜索覆盖层已打开
- **操作**: 用户输入搜索文本
- **预期结果**: 系统应过滤标题或内容中匹配搜索查询的卡片
- **并且**: 实时更新显示

### 场景：空状态

- **前置条件**: 用户没有卡片
- **操作**: 主屏幕加载
- **预期结果**: 系统应显示空状态及创建第一张卡片的说明

---

## 需求：提供卡片创建操作

系统应允许用户从主屏幕创建新卡片。

### 场景：通过 FAB 创建新卡片

- **前置条件**: 主屏幕已显示
- **操作**: 用户点击浮动操作按钮
- **预期结果**: 系统应打开新卡片的全屏编辑器

---

## 需求：导航到卡片详情或编辑器

系统应允许用户打开卡片进行查看或编辑。

### 场景：打开卡片

- **前置条件**: 卡片列表已显示
- **操作**: 用户点击卡片
- **预期结果**: 系统应导航到卡片详情屏幕

### 场景：通过滑动快速编辑

- **前置条件**: 卡片列表已显示
- **操作**: 用户滑动卡片以显示操作
- **预期结果**: 系统应显示快速操作按钮（编辑、删除）

---

## 需求：显示同步状态

系统应在主屏幕上显示同步状态。

### 场景：显示同步指示器

- **前置条件**: 主屏幕已显示
- **操作**: 显示主屏幕
- **预期结果**: 系统应在应用栏显示当前同步状态
- **并且**: 显示已连接设备的数量

---

## 需求：支持卡片选择和批量操作

系统应允许用户选择多张卡片进行批量操作。

### 场景：进入选择模式

- **前置条件**: 卡片列表已显示
- **操作**: 用户长按卡片
- **预期结果**: 系统应进入选择模式
- **并且**: 在所有卡片上显示复选框

### 场景：批量删除卡片

- **前置条件**: 选择模式已激活
- **操作**: 用户选择多张卡片并触发删除操作
- **预期结果**: 系统应显示确认对话框
- **并且**: 确认后删除所有选定的卡片

---

## 测试覆盖

**测试文件**: `test/feature/screens/home_screen_adaptive_feature_test.dart`

**屏幕测试**:
- `it_should_display_card_list()` - 显示卡片列表
- `it_should_show_card_metadata()` - 显示元数据
- `it_should_search_cards()` - 搜索功能
- `it_should_show_empty_state()` - 空状态
- `it_should_create_card_via_fab()` - 通过FAB创建
- `it_should_open_card()` - 打开卡片
- `it_should_show_quick_actions_on_swipe()` - 滑动操作
- `it_should_show_sync_status()` - 显示同步状态
- `it_should_enter_selection_mode()` - 进入选择模式
- `it_should_bulk_delete()` - 批量删除

**验收标准**:
- [ ] 所有屏幕测试通过
- [ ] 搜索正常工作
- [ ] FAB 和滑动手势直观
- [ ] 移动端布局已优化
- [ ] 代码审查通过
- [ ] 文档已更新
