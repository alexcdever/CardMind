# 移动端卡片编辑器屏幕规格

## 概述

本规格定义移动端卡片编辑器屏幕，提供针对移动设备专注内容创作优化的全屏卡片编辑体验。

**移动端特定模式**:
- 全屏编辑，减少干扰
- 触摸优化工具栏（大触摸目标）
- 键盘出现时自动调整布局以保持内容可见

---

## 需求：专用卡片编辑界面

系统应提供针对专注内容创作优化的全屏卡片编辑体验。

### 场景：加载现有卡片进行编辑

- **前置条件**: 用户导航到编辑器并带有现有卡片
- **操作**: 编辑器屏幕打开现有卡片
- **预期结果**: 系统应预填充标题和内容字段

### 场景：创建新卡片

- **前置条件**: 用户发起新卡片创建
- **操作**: 编辑器屏幕打开以创建新卡片
- **预期结果**: 系统应显示空的标题和内容字段
- **并且**: 自动聚焦标题字段

---

## 需求：富文本编辑支持

系统应支持基本的富文本格式化。

### 场景：应用文本格式

- **前置条件**: 用户正在编辑内容
- **操作**: 用户应用格式（粗体、斜体等）
- **预期结果**: 系统应将格式应用于选定的文本
- **并且**: 在保存的内容中保持格式

---

## 需求：保存和丢弃操作

系统应提供明确的保存和丢弃选项。

### 场景：保存卡片

- **前置条件**: 用户已编辑卡片内容
- **操作**: 用户点击保存按钮
- **预期结果**: 系统应将卡片持久化到后端
- **并且**: 导航回上一个屏幕
- **并且**: 显示成功确认

### 场景：丢弃更改

- **前置条件**: 用户有未保存的更改
- **操作**: 用户在有未保存更改时点击取消/返回按钮
- **预期结果**: 系统应显示确认对话框
- **并且**: 如果确认则丢弃更改
- **并且**: 如果取消则继续编辑

---

## 需求：显示字符计数（可选）

系统应可选地显示字符或单词计数。

### 场景：显示内容统计

- **前置条件**: 用户正在编辑内容
- **操作**: 用户正在编辑内容
- **预期结果**: 系统可以在状态区域显示字符计数或单词计数

---

## 测试覆盖

**测试文件**: `test/feature/screens/card_editor_screen_feature_test.dart`

**屏幕测试**:
- `it_should_prepopulate_existing_card()` - 预填充现有卡片
- `it_should_display_empty_fields_for_new_card()` - 新卡片空字段
- `it_should_autofocus_title_field()` - 自动聚焦标题
- `it_should_apply_text_formatting()` - 应用格式
- `it_should_maintain_formatting_in_saved_content()` - 保持格式
- `it_should_save_and_navigate_back()` - 保存并导航
- `it_should_show_confirmation_on_discard()` - 确认对话框
- `it_should_display_character_count()` - 显示计数（可选）

**验收标准**:
- [ ] 所有功能测试（Widget）通过
- [ ] 富文本格式正确工作
- [ ] 确认对话框防止数据丢失
- [ ] 全屏布局针对移动端优化
- [ ] 代码审查通过
- [ ] 文档已更新
