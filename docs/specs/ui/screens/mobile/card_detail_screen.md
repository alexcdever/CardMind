# 移动端卡片详情屏幕规格

## 概述

本规格定义移动端卡片详情屏幕，显示完整卡片内容、元数据与编辑功能。

**移动端特定模式**:
- 全屏布局显示详情
- 支持滑动手势在卡片间导航

---

## 需求：显示完整的卡片内容

系统应显示完整的卡片内容及所有元数据和编辑功能。

### 场景：显示卡片标题和内容

- **前置条件**: 用户导航到卡片详情屏幕
- **操作**: 卡片详情屏幕加载
- **预期结果**: 系统应显示完整的卡片标题
- **并且**: 显示格式正确的完整卡片内容

### 场景：显示卡片元数据

- **前置条件**: 卡片详情屏幕已显示
- **操作**: 显示卡片详情
- **预期结果**: 系统应显示创建时间戳
- **并且**: 显示最后修改时间戳
- **并且**: 显示最后编辑节点昵称
- **并且**: 若未找到节点昵称，则显示截断后的 peer id

---

## 需求：支持内联编辑

系统应允许用户直接在详情屏幕上编辑卡片。

### 场景：进入编辑模式

- **前置条件**: 用户正在查看卡片详情
- **操作**: 用户点击编辑按钮
- **预期结果**: 系统应使标题和内容字段可编辑
- **并且**: 显示保存和取消按钮

### 场景：保存更改

- **前置条件**: 用户已对卡片进行编辑
- **操作**: 用户保存编辑
- **预期结果**: 系统应在后端更新卡片
- **并且**: 退出编辑模式
- **并且**: 显示确认反馈

---

## 需求：提供卡片操作

系统应提供管理卡片的操作。

### 场景：删除卡片

- **前置条件**: 用户正在查看卡片详情
- **操作**: 用户选择删除操作
- **预期结果**: 系统应显示确认对话框
- **并且**: 确认后删除卡片并返回

---

## 需求：显示同步信息

系统应显示卡片的同步信息。

### 场景：显示同步状态

- **前置条件**: 卡片详情屏幕已显示
- **操作**: 显示卡片详情
- **预期结果**: 系统应显示卡片是否已在设备间同步
- **并且**: 显示上次同步时间戳

---

## 测试覆盖

**测试文件**: `test/feature/screens/card_detail_screen_feature_test.dart`

**屏幕测试**:
- `it_should_display_full_title()` - 显示标题
- `it_should_show_complete_content()` - 显示内容
- `it_should_show_metadata()` - 显示元数据
- `it_should_enter_edit_mode()` - 进入编辑模式
- `it_should_save_changes()` - 保存更改
- `it_should_delete_card_with_confirmation()` - 确认删除
- `it_should_show_sync_status()` - 显示同步状态

**验收标准**:
- [ ] 所有屏幕测试通过
- [ ] 内联编辑流畅工作
- [ ] 卡片操作正确工作
- [ ] 代码审查通过
- [ ] 文档已更新
