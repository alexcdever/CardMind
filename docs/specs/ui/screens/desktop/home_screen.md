# 桌面端主屏幕规格

**状态**: 活跃
**依赖**: [../../../domain/card/model.md](../../../domain/card/model.md), [../../../architecture/sync/service.md](../../../architecture/sync/service.md)
**相关测试**: `test/screens/home_screen_desktop_test.dart`

---

## 概述

本规格定义桌面端主屏幕，显示用户卡片集合并提供搜索、过滤与管理功能，采用多列布局。

**桌面端特定模式**:
- 多列布局随窗口大小调整（两列或三列）
- 列表内联编辑卡片，无需全屏导航
- 右键上下文菜单快速操作
- 键盘快捷键（Ctrl+N 新建、Delete 删除等）

---

## 需求：显示带有过滤和搜索的卡片列表

系统应提供显示所有用户卡片的主屏幕，并提供搜索和过滤功能。

### 场景：显示卡片列表

- **前置条件**: 用户打开应用
- **操作**: 主屏幕加载
- **预期结果**: 系统应以多列网格或列表布局显示所有卡片
- **并且**: 显示卡片标题、预览文本和元数据

### 场景：搜索卡片

- **前置条件**: 卡片列表已显示
- **操作**: 用户在搜索栏输入文本
- **预期结果**: 系统应过滤标题或内容中匹配搜索查询的卡片
- **并且**: 实时更新显示

### 场景：按标签过滤

- **前置条件**: 卡片列表已显示
- **操作**: 用户选择标签过滤器
- **预期结果**: 系统应只显示具有选定标签的卡片

### 场景：空状态

- **前置条件**: 用户没有卡片
- **操作**: 主屏幕加载
- **预期结果**: 系统应显示空状态及创建第一张卡片的说明

---

## 需求：提供卡片创建操作

系统应允许用户从主屏幕创建新卡片。

### 场景：内联创建新卡片

- **前置条件**: 主屏幕已显示
- **操作**: 用户点击"新建卡片"按钮
- **预期结果**: 系统应在列表/网格中内联添加新卡片
- **并且**: 聚焦标题字段以便立即编辑

---

## 需求：导航到卡片详情或编辑器

系统应允许用户打开卡片进行查看或编辑。

### 场景：在侧面板中打开卡片

- **前置条件**: 卡片列表已显示
- **操作**: 用户点击卡片
- **预期结果**: 系统应在内联编辑器面板中显示卡片
- **并且**: 在布局中保持卡片列表可见

### 场景：通过上下文菜单快速操作

- **前置条件**: 卡片列表已显示
- **操作**: 用户右键点击卡片
- **预期结果**: 系统应显示包含操作的上下文菜单（编辑、删除、分享）

---

## 需求：显示同步状态

系统应在主屏幕上显示同步状态。

### 场景：显示同步指示器

- **前置条件**: 主屏幕已显示
- **操作**: 显示主屏幕
- **预期结果**: 系统应在工具栏或状态区域显示当前同步状态
- **并且**: 显示已连接设备的数量

---

## 需求：支持卡片选择和批量操作

系统应允许用户选择多张卡片进行批量操作。

### 场景：进入选择模式

- **前置条件**: 卡片列表已显示
- **操作**: 用户 Shift 点击或 Ctrl 点击卡片
- **预期结果**: 系统应进入选择模式
- **并且**: 在所有卡片上显示复选框

### 场景：批量删除卡片

- **前置条件**: 选择模式已激活
- **操作**: 用户选择多张卡片并触发删除操作
- **预期结果**: 系统应显示确认对话框
- **并且**: 确认后删除所有选定的卡片

---

## 测试覆盖

**测试文件**: `test/screens/home_screen_desktop_test.dart`

**屏幕测试**:
- `it_should_display_card_list()` - 显示卡片列表
- `it_should_show_card_metadata()` - 显示元数据
- `it_should_search_cards()` - 搜索功能
- `it_should_filter_by_tags()` - 标签过滤
- `it_should_show_empty_state()` - 空状态
- `it_should_create_card_inline()` - 内联创建
- `it_should_open_card_in_side_panel()` - 在面板中打开
- `it_should_show_context_menu()` - 上下文菜单
- `it_should_show_sync_status()` - 显示同步状态
- `it_should_enter_selection_mode()` - 进入选择模式
- `it_should_bulk_delete()` - 批量删除
- `it_should_support_keyboard_shortcuts()` - 键盘快捷键

**验收标准**:
- [ ] 所有屏幕测试通过
- [ ] 搜索和过滤正常工作
- [ ] 多列布局适应窗口大小
- [ ] 内联编辑流畅
- [ ] 上下文菜单和键盘快捷键工作正常
- [ ] 代码审查通过
- [ ] 文档已更新
