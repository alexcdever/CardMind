# 桌面端卡片编辑器屏幕规格

## 概述

本规格定义桌面端卡片编辑器屏幕，提供针对桌面工作流程优化的内联或侧面板卡片编辑体验，支持多任务处理。

**桌面端特定模式**:
- 侧面板或内联编辑，保持卡片列表可见
- 键盘快捷键（Ctrl+S 保存、Ctrl+B 粗体等）
- 带图标的格式与操作工具栏
- 多窗口/多标签同时编辑多张卡片

---

## 需求：专用卡片编辑界面

系统应提供针对桌面工作流程优化的内联或侧面板卡片编辑体验。

### 场景：加载现有卡片进行编辑

- **前置条件**: 用户从列表中选择卡片
- **操作**: 编辑器打开现有卡片
- **预期结果**: 系统应在编辑器面板中预填充标题和内容字段
- **并且**: 保持卡片列表可见

### 场景：创建新卡片

- **前置条件**: 用户发起新卡片创建
- **操作**: 编辑器打开以创建新卡片
- **预期结果**: 系统应显示空的标题和内容字段
- **并且**: 自动聚焦标题字段

---

## 需求：富文本编辑支持

系统应支持基本的富文本格式化。

### 场景：应用文本格式

- **前置条件**: 用户正在编辑内容
- **操作**: 用户应用格式（粗体、斜体等）
- **预期结果**: 系统应将格式应用于选定的文本
- **并且**: 在保存的内容中保持格式

---

## 需求：保存和丢弃操作

系统应提供明确的保存和丢弃选项。

### 场景：保存卡片

- **前置条件**: 用户已编辑卡片内容
- **操作**: 用户点击保存按钮或使用 Ctrl+S
- **预期结果**: 系统应将卡片持久化到后端
- **并且**: 显示成功确认
- **并且**: 保持编辑器打开以继续编辑

### 场景：丢弃更改

- **前置条件**: 用户有未保存的更改
- **操作**: 用户点击取消按钮或在有未保存更改时关闭编辑器
- **预期结果**: 系统应显示确认对话框
- **并且**: 如果确认则丢弃更改
- **并且**: 如果取消则继续编辑

---

## 需求：显示字符计数（可选）

系统应可选地显示字符或单词计数。

### 场景：显示内容统计

- **前置条件**: 用户正在编辑内容
- **操作**: 用户正在编辑内容
- **预期结果**: 系统可以在状态区域显示字符计数或单词计数

---

## 测试覆盖

**测试文件**: `test/feature/screens/card_editor_screen_feature_test.dart`

**组件测试**:
- `it_should_prepopulate_existing_card()` - 预填充现有卡片
- `it_should_keep_card_list_visible()` - 保持列表可见
- `it_should_display_empty_fields_for_new_card()` - 新卡片空字段
- `it_should_autofocus_title_field()` - 自动聚焦标题
- `it_should_apply_text_formatting()` - 应用格式
- `it_should_maintain_formatting_in_saved_content()` - 保持格式
- `it_should_save_with_ctrl_s()` - 使用 Ctrl+S 保存
- `it_should_keep_editor_open_after_save()` - 保存后保持编辑器打开
- `it_should_show_confirmation_on_discard()` - 确认对话框
- `it_should_display_character_count()` - 显示计数（可选）
- `it_should_support_keyboard_shortcuts()` - 键盘快捷键

**验收标准**:
- [ ] 所有功能测试（Widget）通过
- [ ] 富文本格式正确工作
- [ ] 确认对话框防止数据丢失
- [ ] 侧面板布局流畅工作
- [ ] 键盘快捷键功能正常
- [ ] 代码审查通过
- [ ] 文档已更新
