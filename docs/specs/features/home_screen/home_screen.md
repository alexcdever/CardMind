# 主屏幕规格

本规格定义了主屏幕，显示用户的卡片集合及搜索、过滤和管理功能。

---

## 需求：显示卡片列表

系统应提供显示所有用户卡片的主屏幕，并提供搜索和过滤功能。

### 场景：加载卡片列表

- **操作**：主屏幕加载
- **预期结果**：系统应以列表或网格布局显示所有卡片
- **并且**：显示卡片标题、预览文本和元数据

### 场景：搜索卡片

- **操作**：用户在搜索栏输入文本
- **预期结果**：系统应过滤标题或内容中匹配搜索查询的卡片
- **并且**：实时更新显示

### 场景：按标签过滤

- **操作**：用户选择标签过滤器
- **预期结果**：系统应只显示具有选定标签的卡片

### 场景：显示空状态

- **操作**：用户没有卡片
- **预期结果**：系统应显示空状态及创建第一张卡片的说明

---

## 需求：创建新卡片

系统应允许用户从主屏幕创建新卡片。

### 场景：移动端创建卡片

- **操作**：用户点击移动端的浮动操作按钮
- **预期结果**：系统应打开新卡片的全屏编辑器

### 场景：桌面端创建卡片

- **操作**：用户在桌面端点击"新建卡片"按钮
- **预期结果**：系统应在列表/网格中内联添加新卡片
- **并且**：聚焦标题字段以便立即编辑

---

## 需求：打开卡片

系统应允许用户打开卡片进行查看或编辑。

### 场景：移动端打开卡片

- **操作**：用户在移动端点击卡片
- **预期结果**：系统应导航到卡片详情屏幕
- **或者**：根据配置打开全屏编辑器

### 场景：桌面端打开卡片

- **操作**：用户在桌面端点击卡片
- **预期结果**：系统应在内联编辑器面板中显示卡片
- **并且**：在布局中保持卡片列表可见

---

## 需求：显示同步状态

系统应在主屏幕上显示同步状态。

### 场景：显示同步信息

- **操作**：显示主屏幕
- **预期结果**：系统应在应用栏或状态区域显示当前同步状态
- **并且**：显示已连接设备的数量

---

## 需求：批量操作

系统应允许用户选择多张卡片进行批量操作。

### 场景：进入选择模式

- **操作**：用户在移动端长按卡片或在桌面端 Shift 点击
- **预期结果**：系统应进入选择模式
- **并且**：在所有卡片上显示复选框

### 场景：批量删除卡片

- **操作**：用户选择多张卡片并触发删除操作
- **预期结果**：系统应显示确认对话框
- **并且**：确认后删除所有选定的卡片

---

## 测试覆盖

**测试文件**: `flutter/test/ui/home_screen_test.dart`

**单元测试**:
- `it_should_display_card_list()` - 显示卡片列表
- `it_should_show_card_metadata()` - 显示元数据
- `it_should_search_cards()` - 搜索功能
- `it_should_filter_by_tags()` - 标签过滤
- `it_should_show_empty_state()` - 空状态
- `it_should_create_card_mobile()` - 创建卡片（移动端）
- `it_should_create_card_desktop()` - 创建卡片（桌面端）
- `it_should_open_card_mobile()` - 打开卡片（移动端）
- `it_should_open_card_desktop()` - 打开卡片（桌面端）
- `it_should_show_sync_status()` - 显示同步状态
- `it_should_enter_selection_mode()` - 进入选择模式
- `it_should_bulk_delete()` - 批量删除

**验收标准**:
- [ ] 所有屏幕测试通过
- [ ] 搜索和过滤正常工作
- [ ] 卡片创建流程直观易用
- [ ] 平台特定行为按预期工作
- [ ] 代码审查通过
- [ ] 文档已更新

---

## 相关文档

**相关规格**:
- [card_store.md](../../architecture/storage/card_store.md) - 卡片存储
- [card_list_item.md](../card_list/card_list_item.md) - 卡片列表项
- [card_detail_screen.md](../card_detail/card_detail_screen.md) - 卡片详情屏幕
- [fullscreen_editor.md](../card_editor/fullscreen_editor.md) - 全屏编辑器
- [sync_status_indicator.md](../sync_feedback/sync_status_indicator.md) - 同步状态

---

**最后更新**: 2026-01-23
**作者**: CardMind Team
