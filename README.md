# CardMind

ä¸€æ¬¾ç®€æ´ã€é«˜æ•ˆçš„å¡ç‰‡ç¬”è®°åº”ç”¨ï¼Œæ”¯æŒç¦»çº¿ä¼˜å…ˆå’Œ P2P å¤šè®¾å¤‡åŒæ­¥ã€‚

## é¡¹ç›®ç®€ä»‹

CardMind æ˜¯ä¸€æ¬¾ä¸“æ³¨äºä¸ªäººçŸ¥è¯†ç®¡ç†çš„å¡ç‰‡å¼ç¬”è®°åº”ç”¨ã€‚é€šè¿‡å¡ç‰‡çš„å½¢å¼ç»„ç»‡å’Œç®¡ç†ä½ çš„ç¬”è®°ã€æƒ³æ³•å’ŒçŸ¥è¯†ç‰‡æ®µã€‚åº”ç”¨é‡‡ç”¨ç¦»çº¿ä¼˜å…ˆè®¾è®¡ï¼ŒåŸºäº CRDT æŠ€æœ¯å®ç°å¯é çš„å¤šè®¾å¤‡åŒæ­¥ï¼Œæ”¯æŒå®Œå…¨ç¦»çº¿ç¼–è¾‘å’Œè‡ªåŠ¨å†²çªè§£å†³ã€‚

## æ ¸å¿ƒç‰¹æ€§

- **å¡ç‰‡å¼ç¬”è®°**: ç”¨å¡ç‰‡ç»„ç»‡ä½ çš„æƒ³æ³•å’ŒçŸ¥è¯†ï¼Œæ¯å¼ å¡ç‰‡ä¸€ä¸ªä¸»é¢˜
- **Markdown æ”¯æŒ**: æ”¯æŒå®Œæ•´çš„ Markdown æ ¼å¼ï¼Œæ–¹ä¾¿ç¼–å†™ç»“æ„åŒ–ç¬”è®°
- **ç¦»çº¿ä¼˜å…ˆ**: åŸºäº Loro CRDTï¼Œæ‰€æœ‰æ•°æ®æœ¬åœ°å­˜å‚¨ï¼Œæ— ç½‘ç»œæ—¶ä¹Ÿèƒ½æ­£å¸¸ä½¿ç”¨
- **P2P åŒæ­¥**: å»ä¸­å¿ƒåŒ–çš„ç‚¹å¯¹ç‚¹åŒæ­¥ï¼Œæ— éœ€ä¾èµ–æœåŠ¡å™¨
- **è‡ªåŠ¨å†²çªè§£å†³**: CRDT ç®—æ³•è‡ªåŠ¨å¤„ç†ç¼–è¾‘å†²çªï¼Œæ°¸ä¸ä¸¢å¤±æ•°æ®
- **è·¨å¹³å°**: åŸºäº Flutter å¼€å‘ï¼Œæ”¯æŒ iOSã€Androidã€Windowsã€macOSã€Linux

## æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæŠ€æœ¯
- **å‰ç«¯**: Flutter 3.x (Dart)
- **åç«¯é€»è¾‘**: Rust
- **CRDT å¼•æ“**: Loroï¼ˆæ–‡ä»¶æŒä¹…åŒ–ï¼‰
- **æŸ¥è¯¢ç¼“å­˜**: SQLiteï¼ˆè¯»å–å±‚ï¼‰
- **è·¨å¹³å°æ¡¥æ¥**: flutter_rust_bridge

### æ¶æ„æ¨¡å¼
- **åŒå±‚æ¶æ„**: Loro CRDTï¼ˆå†™å…¥å±‚ï¼‰+ SQLiteï¼ˆè¯»å–å±‚ï¼‰
- **å•æ± æ¨¡å‹**: æ¯ä¸ªè®¾å¤‡æœ€å¤šåŠ å…¥ä¸€ä¸ªæ•°æ®æ± 
- **è§„æ ¼é©±åŠ¨**: OpenSpec è§„èŒƒé©±åŠ¨å¼€å‘
- **çº¦æŸè‡ªåŠ¨åŒ–**: Project Guardian è‡ªåŠ¨æ‰§è¡Œä»£ç çº¦æŸ

è¯¦ç»†æŠ€æœ¯å†³ç­–è¯·æŸ¥çœ‹ [æ¶æ„è§„æ ¼](docs/specs/architecture/)ã€‚

## é¡¹ç›®çŠ¶æ€

**å½“å‰é˜¶æ®µ**: å¼€å‘ä¸­
**æœ€åæ›´æ–°**: 2026-01-23

âœ… **å·²å®Œæˆ**:
- åŒå±‚æ¶æ„ï¼ˆLoro + SQLiteï¼‰
- å•æ± æ‰€æœ‰æƒæ¨¡å‹
- è§„æ ¼æ–‡æ¡£ä½“ç³»ï¼ˆ53 ä¸ªè§„æ ¼æ–‡æ¡£ï¼Œ100% åŒè¯­åˆè§„ï¼‰
- OpenSpec å·¥ä½œæµ
- Project Guardian çº¦æŸç³»ç»Ÿ
- å®Œæ•´çš„ ADR æ–‡æ¡£ï¼ˆ5 ä¸ªæ¶æ„å†³ç­–è®°å½•ï¼‰

ğŸš§ **è¿›è¡Œä¸­**:
- æ ¸å¿ƒåŠŸèƒ½å®ç°
- æµ‹è¯•è¦†ç›–
- UI ç»„ä»¶å¼€å‘

ğŸ”œ **è®¡åˆ’ä¸­**:
- P2P å¤šè®¾å¤‡åŒæ­¥
- å…¨æ–‡æœç´¢
- æ•°æ®å¯¼å…¥/å¯¼å‡º

## å¿«é€Ÿå¼€å§‹

### å¼€å‘ç¯å¢ƒè¦æ±‚

- **Flutter**: 3.x
- **Rust**: 1.70+
- **Dart**: 3.x

### å¿«é€Ÿå‘½ä»¤

```bash
# è¿è¡Œæµ‹è¯•
cd rust && cargo test              # Rust æµ‹è¯•
flutter test                       # Flutter æµ‹è¯•

# é™æ€æ£€æŸ¥
cd rust && cargo clippy            # Rust é™æ€åˆ†æ
flutter analyze                    # Flutter é™æ€åˆ†æ

# ä»£ç æ ¼å¼åŒ–
cd rust && cargo fmt               # Rust æ ¼å¼åŒ–
dart format .                      # Dart æ ¼å¼åŒ–

# çº¦æŸéªŒè¯
dart tool/validate_constraints.dart        # å¿«é€ŸéªŒè¯
dart tool/validate_constraints.dart --full # å®Œæ•´éªŒè¯

# ç”Ÿæˆæ¡¥æ¥ä»£ç 
dart tool/generate_bridge.dart

# è¿è¡Œåº”ç”¨
flutter run
```

## å¼€å‘è€…æŒ‡å—

### ğŸ“– æ–°æ‰‹å…¥é—¨ï¼ˆæ¨èé˜…è¯»é¡ºåºï¼‰

å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡æ¥è§¦è¿™ä¸ªé¡¹ç›®ï¼Œå»ºè®®æŒ‰ä»¥ä¸‹é¡ºåºé˜…è¯»ï¼š

1. **[README.md](README.md)** - é¡¹ç›®æ¦‚è§ˆï¼ˆä½ åœ¨è¿™é‡Œï¼‰
2. **[CLAUDE.md](CLAUDE.md)** - å¼€å‘è§„èŒƒå’Œæ–‡æ¡£å¯¼èˆªï¼ˆå¿…è¯»ï¼ï¼‰
3. **[docs/specs/architecture/](docs/specs/architecture/)** - æ¶æ„è§„æ ¼ï¼ˆäº†è§£"ä¸ºä»€ä¹ˆ"ï¼‰
4. **[docs/specs/README.md](docs/specs/README.md)** - è§„æ ¼æ–‡æ¡£ç´¢å¼•ï¼ˆäº†è§£"æ˜¯ä»€ä¹ˆ"ï¼‰

### ğŸš€ å¼€å‘å·¥ä½œæµ

æœ¬é¡¹ç›®ä½¿ç”¨ **Superpowers + OpenSpec é›†æˆå·¥ä½œæµ**ï¼š

#### æ–¹å¼ 1ï¼šSuperpowers + OpenSpec å·¥ä½œæµï¼ˆæ¨èï¼‰

**é€‚ç”¨åœºæ™¯**: æ–°åŠŸèƒ½å¼€å‘ã€åŠŸèƒ½ä¿®æ”¹ã€åŠŸèƒ½åˆ é™¤ã€å¤æ‚ bug ä¿®å¤ã€æ¶æ„é‡æ„

**æ ¸å¿ƒç†å¿µ**: Superpowers ä¸»å¯¼å¼€å‘æµç¨‹ï¼ŒOpenSpec è‡ªåŠ¨åµŒå…¥åˆ°æ‰§è¡Œé˜¶æ®µ

**å®Œæ•´æµç¨‹**:
```
1. Brainstormï¼ˆå¯¹è¯ç”Ÿæˆè®¡åˆ’ï¼‰ 
   â†“
2. ExecutePlanï¼ˆè‡ªåŠ¨åµŒå…¥ OpenSpecï¼‰
   â†“
3. å½’æ¡£ï¼ˆåŒé‡å½’æ¡£ï¼‰
```

**å…¸å‹å¯¹è¯**:
```
ç”¨æˆ·: "æˆ‘æƒ³æ·»åŠ å¡ç‰‡æ ‡ç­¾åŠŸèƒ½"ï¼ˆæˆ–ä¿®æ”¹/åˆ é™¤æŸåŠŸèƒ½ï¼‰
  â†“
Superpowers Brainstorm: 
  - ç†è§£éœ€æ±‚å’ŒèƒŒæ™¯
  - æ¢è®¨æŠ€æœ¯æ–¹æ¡ˆ
  - ç”Ÿæˆè®¡åˆ’æ–‡æ¡£: docs/plans/2026-01-28-card-tags-feature.md
  â†“
ç”¨æˆ·: "å¼€å§‹å®æ–½å§"
  â†“
Superpowers ExecutePlan:
  - è‡ªåŠ¨åˆ›å»º OpenSpec change
  - è‡ªåŠ¨ç”Ÿæˆ artifactsï¼ˆproposal, design, specs, tasksï¼‰
  - æŒ‰è®¡åˆ’æ‰§è¡Œä»»åŠ¡
  - è‡ªåŠ¨ä»£ç å®¡æŸ¥
  - è‡ªåŠ¨éªŒè¯å’Œå½’æ¡£
  â†“
å®Œæˆ: è®¡åˆ’å’Œè§„æ ¼åŒé‡å½’æ¡£
```

**ä¼˜åŠ¿**:
- âœ… æ— ç¼é›†æˆï¼šç”¨æˆ·ä¸éœ€è¦æ‰‹åŠ¨è°ƒç”¨ OpenSpec å‘½ä»¤
- âœ… è‡ªåŠ¨åŒ–ï¼šExecutePlan è‡ªåŠ¨å¤„ç† OpenSpec æµç¨‹
- âœ… å¯è¿½æº¯ï¼šè®¡åˆ’æ–‡æ¡£å’Œè§„æ ¼æ–‡æ¡£åŒå‘å…³è”
- âœ… è´¨é‡ä¿éšœï¼šè‡ªåŠ¨åµŒå…¥ä»£ç å®¡æŸ¥å’ŒéªŒè¯æ­¥éª¤
- âœ… å…¨åœºæ™¯è¦†ç›–ï¼šæ”¯æŒå¢åˆ æ”¹æŸ¥ï¼Œä¸ä»…é™äºæ–°åŠŸèƒ½å¼€å‘

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ [AGENTS.md](AGENTS.md)ã€‚

#### æ–¹å¼ 2ï¼šä¼ ç»Ÿå·¥ä½œæµï¼ˆç”¨äºå°æ”¹åŠ¨ï¼‰

1. æŸ¥çœ‹ç›¸å…³è§„èŒƒ: `docs/specs/`
2. æŸ¥çœ‹ç›¸å…³æ¶æ„è§„æ ¼: `docs/specs/architecture/`
3. ä½¿ç”¨ `TodoWrite` è·Ÿè¸ªä»»åŠ¡
4. éµå¾ªçº¦æŸ: Project Guardian è‡ªåŠ¨æ£€æŸ¥
5. è¿è¡Œæµ‹è¯•: ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡

### ğŸ“š æ–‡æ¡£ä½“ç³»

æœ¬é¡¹ç›®é‡‡ç”¨åˆ†å±‚æ–‡æ¡£ç³»ç»Ÿï¼ŒæŒ‰ä¼˜å…ˆçº§é¡ºåºï¼š

| ä¼˜å…ˆçº§ | ä½ç½® | å†…å®¹ | ç‰¹ç‚¹ |
|--------|------|------|------|
| 1 | `docs/specs/` | è§„æ ¼æ–‡æ¡£ã€é¢†åŸŸæ¨¡å‹ã€æ¶æ„è®¾è®¡ | å¯æ‰§è¡Œã€å¯æµ‹è¯• |
| 2 | `doc/api/` | API æ–‡æ¡£ | è‡ªåŠ¨ç”Ÿæˆ |
| 3 | `project-guardian.toml` | ä»£ç çº¦æŸè§„åˆ™ | è‡ªåŠ¨æ‰§è¡Œ |
| 4 | `docs/plans/` | å®æ–½è®¡åˆ’ | è¿›è¡Œä¸­ |

#### è§„æ ¼æ–‡æ¡£ï¼ˆ`docs/specs/`ï¼‰

æŒ‰å±‚çº§ç»„ç»‡çš„è§„æ ¼æ–‡æ¡£ï¼š

```
docs/specs/
â”œâ”€â”€ README.md          # è§„æ ¼ç´¢å¼•
â”œâ”€â”€ domain/            # é¢†åŸŸæ¨¡å‹
â”œâ”€â”€ architecture/      # æ¶æ„è§„æ ¼
â”œâ”€â”€ features/          # ç”¨æˆ·åŠŸèƒ½è§„æ ¼
â””â”€â”€ ui/                # UI è§„æ ¼
```

**å…³é”®å…¥å£**:
- `docs/specs/README.md` - è§„æ ¼ç´¢å¼•
- `docs/specs/domain/` - é¢†åŸŸæ¨¡å‹
- `docs/specs/architecture/` - æ¶æ„è§„æ ¼
- `docs/specs/features/` - åŠŸèƒ½è§„æ ¼
- `docs/specs/ui/` - UI è§„æ ¼

#### æ¶æ„è§„æ ¼ï¼ˆ`docs/specs/architecture/`ï¼‰

è®°å½•æ¶æ„è®¾è®¡ä¸å®ç°è§„èŒƒï¼š

- [åŒå±‚æ¶æ„](docs/specs/architecture/storage/dual_layer.md)
- [å¡ç‰‡å­˜å‚¨](docs/specs/architecture/storage/card_store.md)
- [æ± å­˜å‚¨](docs/specs/architecture/storage/pool_store.md)
- [è®¾å¤‡é…ç½®](docs/specs/architecture/storage/device_config.md)
- [SQLite ç¼“å­˜](docs/specs/architecture/storage/sqlite_cache.md)
- [Loro é›†æˆ](docs/specs/architecture/storage/loro_integration.md)
- [åŒæ­¥æœåŠ¡](docs/specs/architecture/sync/service.md)
- [èŠ‚ç‚¹å‘ç°](docs/specs/architecture/sync/peer_discovery.md)
- [è®¢é˜…åŒæ­¥](docs/specs/architecture/sync/subscription.md)
- [å†²çªè§£å†³](docs/specs/architecture/sync/conflict_resolution.md)
- [å¯†ç ç®¡ç†](docs/specs/architecture/security/password.md)
- [å¯†é’¥å­˜å‚¨](docs/specs/architecture/security/keyring.md)
- [éšç§ä¿æŠ¤](docs/specs/architecture/security/privacy.md)

#### Project Guardian çº¦æŸç³»ç»Ÿ

è‡ªåŠ¨æ‰§è¡Œçš„ä»£ç çº¦æŸï¼Œé˜²æ­¢ LLM å¹»è§‰å’Œæ¶æ„è¿è§„ï¼š

- `project-guardian.toml` - çº¦æŸé…ç½®
- `.project-guardian/best-practices.md` - 11 ä¸ªæœ€ä½³å®è·µ
- `.project-guardian/anti-patterns.md` - 11 ä¸ªåæ¨¡å¼

### ğŸ¯ æ ¸å¿ƒæ¶æ„åŸåˆ™

1. **åŒå±‚æ¶æ„**
   - æ‰€æœ‰å†™æ“ä½œ â†’ Loro CRDTï¼ˆçœŸå®æ•°æ®æºï¼‰
   - æ‰€æœ‰è¯»æ“ä½œ â†’ SQLiteï¼ˆæŸ¥è¯¢ç¼“å­˜ï¼‰
   - è®¢é˜…é©±åŠ¨ï¼šLoro æäº¤ â†’ å›è°ƒ â†’ SQLite æ›´æ–°

2. **å•æ± æ¨¡å‹**
   - æ¯å¼ å¡ç‰‡å±äºä¸€ä¸ªæ± 
   - æ¯ä¸ªè®¾å¤‡æœ€å¤šåŠ å…¥ä¸€ä¸ªæ± 
   - æ–°å¡ç‰‡è‡ªåŠ¨å±äºå·²åŠ å…¥çš„æ± 

3. **è§„æ ¼é©±åŠ¨**
   - è§„æ ¼ â†’ æµ‹è¯• â†’ ä»£ç 
   - ä½¿ç”¨ `it_should_xxx()` æµ‹è¯•å‘½å
   - æ‰€æœ‰ API è¿”å› `Result<T, Error>`

è¯¦ç»†è¯´æ˜è¯·æŸ¥çœ‹ [CLAUDE.md](CLAUDE.md)ã€‚

## Git å·¥ä½œæµ

### åˆ†æ”¯ç­–ç•¥
- `main` - ä¸»åˆ†æ”¯ï¼Œç¨³å®šç‰ˆæœ¬
- `feature/xxx` - åŠŸèƒ½åˆ†æ”¯
- `bugfix/xxx` - ä¿®å¤åˆ†æ”¯
- `refactor/xxx` - é‡æ„åˆ†æ”¯

### Commit è§„èŒƒ

é‡‡ç”¨ Conventional Commits è§„èŒƒï¼š

```
<type>(<scope>): <subject>

<body (optional)>
```

**Type ç±»å‹**:
- `feat`: æ–°åŠŸèƒ½
- `fix`: Bug ä¿®å¤
- `refactor`: ä»£ç é‡æ„
- `test`: æµ‹è¯•ç›¸å…³
- `docs`: æ–‡æ¡£æ›´æ–°
- `chore`: æ„å»º/å·¥å…·/ä¾èµ–å˜åŠ¨

**ç¤ºä¾‹**:
```bash
feat(pool): å®ç°å•æ± æ‰€æœ‰æƒæ¨¡å‹

- æ·»åŠ è®¾å¤‡æ± æˆå‘˜èµ„æ ¼éªŒè¯
- æ‹’ç»åŠ å…¥ç¬¬äºŒä¸ªæ± çš„è¯·æ±‚
- æµ‹è¯•è¦†ç›–ç‡ 95%

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>
```

### PR è¦æ±‚
- âœ… æµ‹è¯•é€šè¿‡ï¼ˆ`cargo test` + `flutter test`ï¼‰
- âœ… é™æ€æ£€æŸ¥é€šè¿‡ï¼ˆ`cargo clippy` + `flutter analyze`ï¼‰
- âœ… çº¦æŸéªŒè¯é€šè¿‡ï¼ˆ`dart tool/validate_constraints.dart`ï¼‰
- âœ… éµå¾ª Commit è§„èŒƒ

## æ–‡æ¡£ç´¢å¼•

### æ ¸å¿ƒæ–‡æ¡£
- [CLAUDE.md](CLAUDE.md) - å¼€å‘è§„èŒƒå’Œæ–‡æ¡£å¯¼èˆªï¼ˆå¿…è¯»ï¼‰
- [AGENTS.md](AGENTS.md) - AI Agent å·¥ä½œæŒ‡å—

### è§„æ ¼æ–‡æ¡£
- [è§„æ ¼ç´¢å¼•](docs/specs/README.md) - è§„æ ¼æ–‡æ¡£å…¥å£
- [é¢†åŸŸæ¨¡å‹](docs/specs/domain/) - ä¸šåŠ¡å®ä½“å®šä¹‰
- [æ¶æ„è§„æ ¼](docs/specs/architecture/) - æŠ€æœ¯å®ç°è§„èŒƒ
- [åŠŸèƒ½è§„æ ¼](docs/specs/features/) - ç”¨æˆ·åŠŸèƒ½è§„æ ¼
- [UI è§„æ ¼](docs/specs/ui/) - ç•Œé¢ä¸äº¤äº’è§„èŒƒ

### è®¡åˆ’ä¸äº§ç‰©
- [å®æ–½è®¡åˆ’](docs/plans/) - è¿›è¡Œä¸­çš„è®¡åˆ’æ–‡æ¡£
- [API æ–‡æ¡£](doc/api/) - è‡ªåŠ¨ç”Ÿæˆçš„ API é¡µé¢

### å·¥å…·ä¸æµç¨‹
- [å·¥å…·è„šæœ¬](tool/README.md) - æ„å»ºä¸è´¨é‡æ£€æŸ¥å…¥å£

## ä¾èµ–ç‰ˆæœ¬

### Rust æ ¸å¿ƒä¾èµ–

```toml
loro = "1.0"                    # CRDT å¼•æ“
rusqlite = "0.31"               # SQLite æ•°æ®åº“
uuid = "1.7"                    # UUID v7
flutter_rust_bridge = "2.0"    # Flutter æ¡¥æ¥
tracing = "0.1"                 # æ—¥å¿—ç³»ç»Ÿ
```

### Flutter æ ¸å¿ƒä¾èµ–

```yaml
provider: ^6.0.0                # çŠ¶æ€ç®¡ç†
flutter_markdown: ^0.6.0        # Markdown æ¸²æŸ“
flutter_rust_bridge: ^2.0.0    # Rust æ¡¥æ¥
logger: ^2.0.0                  # æ—¥å¿—ç³»ç»Ÿ
```

å®Œæ•´ä¾èµ–åˆ—è¡¨è¯·æŸ¥çœ‹ `rust/Cargo.toml` å’Œ `pubspec.yaml`ã€‚

## è®¸å¯è¯

[å¾…å®š]

## è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·å…ˆé˜…è¯» [CLAUDE.md](CLAUDE.md) äº†è§£å¼€å‘è§„èŒƒã€‚

---

**æœ€åæ›´æ–°**: 2026-01-23
**ç»´æŠ¤è€…**: CardMind Team
