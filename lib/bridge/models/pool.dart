// This file is automatically generated, so please do not edit it.
// @generated by `flutter_rust_bridge`@ 2.11.1.

// ignore_for_file: invalid_use_of_internal_member, unused_import, unnecessary_import

import 'package:flutter_rust_bridge/flutter_rust_bridge_for_generated.dart';

import '../frb_generated.dart';

/// 数据池成员设备
///
/// # 字段说明
///
/// - `peer_id`: libp2p PeerId
/// - `nickname`: 设备在此数据池中的昵称（可修改）
/// - `device_os`: 设备系统类型
/// - `joined_at`: 加入数据池的时间（毫秒级时间戳）
///
/// # 示例
///
/// ```
/// use cardmind_rust::models::pool::Device;
///
/// let device = Device {
///     peer_id: "12D3KooWDevice001".to_string(),
///     nickname: "12D3KmacOS".to_string(),
///     device_os: "macOS".to_string(),
///     joined_at: 1704067200000,
/// };
/// ```
class Device {
  const Device({
    required this.peerId,
    required this.nickname,
    required this.deviceOs,
    required this.joinedAt,
  });

  /// libp2p PeerId
  final String peerId;

  /// 设备昵称（数据池特定，可修改）
  final String nickname;

  /// 设备系统类型
  final String deviceOs;

  /// 加入数据池的时间（Unix 毫秒时间戳）
  final PlatformInt64 joinedAt;

  @override
  int get hashCode =>
      peerId.hashCode ^
      nickname.hashCode ^
      deviceOs.hashCode ^
      joinedAt.hashCode;

  @override
  bool operator ==(Object other) =>
      identical(this, other) ||
      other is Device &&
          runtimeType == other.runtimeType &&
          peerId == other.peerId &&
          nickname == other.nickname &&
          deviceOs == other.deviceOs &&
          joinedAt == other.joinedAt;
}

/// 数据池
///
/// # 字段说明
///
/// - `pool_id`: 数据池唯一标识（UUID v7）
/// - `name`: 数据池名称（最大 128 字符）
/// - `secretkey`: 数据池 secretkey（明文保存于元数据）
/// - `members`: 成员设备列表
/// - `card_ids`: 卡片 ID 列表（单池模型：池持有卡片）
/// - `created_at`: 创建时间（毫秒级时间戳）
/// - `updated_at`: 最后更新时间（毫秒级时间戳）
///
/// # 示例
///
/// ```
/// use cardmind_rust::models::pool::{Pool, Device};
///
/// let mut pool = Pool::new("pool-001", "工作笔记", "secretkey");
/// let device = Device::new("12D3KooWDevice001", "macOS");
/// pool.add_member(device);
/// pool.add_card("card-001");
///
/// assert_eq!(pool.pool_id, "pool-001");
/// assert_eq!(pool.name, "工作笔记");
/// assert_eq!(pool.members.len(), 1);
/// assert_eq!(pool.card_ids.len(), 1);
/// ```
class Pool {
  const Pool({
    required this.poolId,
    required this.name,
    required this.secretkey,
    required this.members,
    required this.cardIds,
    required this.createdAt,
    required this.updatedAt,
  });

  /// 数据池唯一标识
  final String poolId;

  /// 数据池名称（最大 128 字符）
  final String name;

  /// 数据池 secretkey（明文）
  final String secretkey;

  /// 成员设备列表
  final List<Device> members;

  /// 卡片 ID 列表（单池模型：真理源在 Pool.layer）
  final List<String> cardIds;

  /// 创建时间（Unix 毫秒时间戳）
  final PlatformInt64 createdAt;

  /// 最后更新时间（Unix 毫秒时间戳）
  final PlatformInt64 updatedAt;

  @override
  int get hashCode =>
      poolId.hashCode ^
      name.hashCode ^
      secretkey.hashCode ^
      members.hashCode ^
      cardIds.hashCode ^
      createdAt.hashCode ^
      updatedAt.hashCode;

  @override
  bool operator ==(Object other) =>
      identical(this, other) ||
      other is Pool &&
          runtimeType == other.runtimeType &&
          poolId == other.poolId &&
          name == other.name &&
          secretkey == other.secretkey &&
          members == other.members &&
          cardIds == other.cardIds &&
          createdAt == other.createdAt &&
          updatedAt == other.updatedAt;
}
